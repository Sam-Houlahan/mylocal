H.util.eval("N.prototype.N=ca(0,function(a){var b=this.g,c,d=this;a!==x?(B(a,Ug,N.prototype.N,0),c=a):c=ah;c!==b&&b.Da(function(a,b,g){return d.m(a)?(c.add(a,b,g),!0):!1});this.g=c});function S(a,b,c,d,e,f){if(a&&b)this.ae(a),this.md(b),this.kc(c),this.l(e),this.j(f),this.sf(d);else throw Error('Parameters \"scheme\" and \"host\" must be specified');}r(\"H.service.Url\",S);\nfunction $l(a,b){var c=a,d=w.document,e,f,g,h,k=d&&d.createElement(\"a\"),l=\"\";d?(b&&(f=(e=d.getElementsByTagName(\"base\")[0])&&e.href,g=d.head,h=e||g.appendChild(d.createElement(\"base\")),h.href=b),k.href=c,l=k.href,b&&(e?e.href=f:g.removeChild(h))):/[\\w]+:\\/\\//.test(c)&&(l=c);g=/(?:(\\w+):\\/\\/)?(?:([^:]+):([^@/]*)@)?([^/:]+)?(?:[:]{1}([0-9]+))?(\\/[^?#]*)?(\\?[^#]+)?(#.*)?/.exec(l);c=g[1];k=g[4];d=g[5];h=g[6];e=g[7];f=g[8];!g[2]&&k&&/@/.test(k)&&(k=k.split(\"@\")[1]);g=k;h=h&&0<h.length?h.substr(1):\"\";var k=\n{},m;if(e)for(l=/([?&]?([^=&+]+))(=([^&]+))?/g;m=l.exec(e);)k[decodeURIComponent(m[2])]=m[4]?decodeURIComponent(m[4]):void 0;return new S(c,g,h,k,isNaN(+d)?void 0:+d,f&&0<f.length?f.substr(1):\"\")}S.parse=$l;var am=0;S.prototype.clone=function(){am++;var a={},b;for(b in this.b)a[b]=this.b[b];return new S(this.g,this.sc,this.c,a,this.f,this.a)};S.prototype.clone=S.prototype.clone;\nS.prototype.ae=function(a){if(!a||\"string\"!==typeof a)throw Error('The \"scheme\" parameter must be a non-empty string.');this.g=a;return this};S.prototype.setScheme=S.prototype.ae;S.prototype.B=function(){return this.g};S.prototype.getScheme=S.prototype.B;S.prototype.md=function(a){if(!a||\"string\"!==typeof a||\"-\"===a.charAt(0)||\".\"===a.charAt(0)||\".\"===a.charAt(a.length-1))throw Error('The \"host\" parameter is not a valid host name.');this.sc=a;return this};S.prototype.setHost=S.prototype.md;\nS.prototype.o=function(){return this.sc};S.prototype.getHost=S.prototype.o;S.prototype.kc=function(a){this.c=a||void 0;return this};S.prototype.setPath=S.prototype.kc;S.prototype.m=function(){return this.c};S.prototype.getPath=S.prototype.m;S.prototype.sf=function(a){if(a)if(\"object\"==typeof a)this.b=a;else throw Error('Parameter \"params\" must be an object.');else this.b={};return this};S.prototype.setQuery=S.prototype.sf;S.prototype.i=function(){return!bm(this)};S.prototype.hasQuery=S.prototype.i;\nS.prototype.s=function(){return this.b};S.prototype.getQuery=S.prototype.s;S.prototype.l=function(a){if(a&&isNaN(parseInt(a,10)))throw Error('Parameter \"port\" must be a number or undefined');this.f=+a||void 0;return this};S.prototype.setPort=S.prototype.l;S.prototype.u=function(){return this.f};S.prototype.getPort=S.prototype.u;S.prototype.j=function(a){this.a=a||void 0;return this};S.prototype.setAnchor=S.prototype.j;S.prototype.A=function(){return this.a};S.prototype.getAnchor=S.prototype.A;\nS.prototype.$=function(a){if(\"object\"!==typeof a)throw Error('Parameter \"other\" must be an object.');var b=this.b,c;for(c in a)a.hasOwnProperty(c)&&\"function\"!==typeof a[c]&&(b[c]=a[c]);return this};S.prototype.mergeQuery=S.prototype.$;S.prototype.xa=function(a){if(!a||\"string\"!==typeof a)throw Error('Parameter \"subDomain\" must be a non-empty string');\".\"===a.substr(a.length-1)&&(a=a.substr(0,a.length-1));return this.md(a+\".\"+this.sc)};S.prototype.addSubDomain=S.prototype.xa;\nS.prototype.T=function(a){if(!a||\"string\"!==typeof a)throw Error('Parameter \"subPath\" must be a non-empty string');return this.kc((this.c?this.c+\"/\":\"\")+a)};S.prototype.addSubPath=S.prototype.T;S.prototype.toString=function(){return[this.g+\"://\",this.sc,this.f?\":\"+this.f:\"\",this.c||!bm(this)||this.a?\"/\":\"\",this.c?encodeURI(this.c):\"\",cm(this),this.a?\"#\"+encodeURIComponent(this.a):\"\"].join(\"\")};S.prototype.toString=S.prototype.toString;\nfunction cm(a){var b=[],c,d=a.b,e;for(c in d)d.hasOwnProperty(c)&&\"function\"!==typeof d[c]&&(e=a.b[c],b.push(encodeURIComponent(c)+(void 0===e?\"\":\"=\"+encodeURIComponent(e))));return 0<b.length?\"?\"+b.join(\"&\"):\"\"}function bm(a){var b,c=0;for(b in a.b)if(a.b.hasOwnProperty(b)&&\"function\"!==typeof a.b[b]&&(c++,0<c))break;return!c};function dm(a){function b(b){d.contains(e)&&d.removeChild(e);l&&clearTimeout(l);delete dm.a[f];b&&a.Yc&&a.Yc.call(k,b)}if(!a.url||!a.mc)throw Error('Parameter \"options\" must specify at least a URL and a callback.');if(\"function\"!==typeof a.mc)throw Error(\"Parmaters options.callback must be a function\");var c=a.Fi||document,d=c.getElementsByTagName(\"head\")[0],e=c.createElement(\"script\"),c=a.url instanceof S?a.url:$l(a.url,a.Ei),f=dm.c++,g=a.vd||\"callback\",h=a.mc,k={},l=null;k.id=f;k.cancel=function(){b(\"cancelled\")};\n0!==a.timeout&&(l=w.setTimeout(function(){b(\"timeout\")},a.timeout||3E4));dm.a[f]=function(a){b();h.call(k,a)};e.type=\"text/javascript\";e.src=c.toString()+(c.i()?\"&\":\"?\")+g+\"=\"+(a.kf?\"H.service.jsonp.handleResponse(\"+f+\")\":encodeURI(\"H.service.jsonp.handleResponse(\"+f+\")\"));d.appendChild(e);return k}r(\"H.service.jsonp\",dm);dm.b=function(a){return(a=dm.a[a])?a:function(){}};dm.handleResponse=dm.b;dm.c=0;dm.a={};function em(a){a=a||{};this.D=a.subDomain;this.c=a.path;this.N=a.callbackKey;this.f=a.baseUrl}r(\"H.service.AbstractRestService\",em);em.prototype.Y=function(a,b,c,d,e){this.a=(e||this.f).clone();this.D&&this.a.xa(this.D);this.c&&this.a.kc(this.c);c&&this.a.ae(\"https\");return this};em.prototype.configure=em.prototype.Y;em.prototype.aa=function(){return this.a};\nfunction fm(a,b,c,d){if(!sa(c))throw Error(\"onResult callback needed\");if(!sa(d))throw Error(\"onError callback needed\");return dm({url:b,mc:function(a){c(a)},Yc:function(a){d(Error(\"[\"+a+\"] \"+b+\" request failed\"))},vd:a.N})};function T(a){a=gm(hm,a);this.u(a.baseUrl);this.c(a.useCIT);this.g(a.useHTTPS);im(this,a.app_id,a.app_code);this.a={}}r(\"H.service.Platform\",T);function im(a,b,c){a.j=b;a.i=c;a.f.$({app_id:b,app_code:c})}T.prototype.Y=function(a){if(a.configure)return a.configure(this.j,this.i,this.B,this.s,this.f);throw Error(\"Object is not configurable\");};T.prototype.configure=T.prototype.Y;T.prototype.g=function(a){this.B=a;this.f.ae(a?\"https\":\"http\")};T.prototype.setUseHTTPS=T.prototype.g;\nT.prototype.c=function(a){this.s=a;this.f.md((a?\"cit.\":\"\")+this.A)};T.prototype.setUseCIT=T.prototype.c;T.prototype.u=function(a){this.A=a.sc;this.f=a=a.clone();a.$({xnlp:\"CL_JSMv3.\"+hl().version});this.c(this.s);this.g(this.B);im(this,this.j,this.i)};T.prototype.setBaseUrl=T.prototype.u;T.prototype.C=function(){return this.f};T.prototype.getBaseUrl=T.prototype.C;var hm={app_id:null,app_code:null,useHTTPS:!1,useCIT:!1,baseUrl:new S(\"http\",\"api.here.com\")};\nr(\"H.service.setOptions\",function(a,b){hm[a]=b});r(\"H.service.getOptions\",function(a){return hm[a]});function gm(a,b){var c=b||{},d;for(d in a)!a.hasOwnProperty(d)||d in c||(c[d]=a[d]),b&&b.hasOwnProperty(d)&&(c[d]=b[d]);return c};function jm(a){a=gm(hm.trafficIncidents,a);a.callbackKey=\"jsoncallback\";jm.v.constructor.call(this,a)}v(jm,em);r(\"H.service.TrafficIncidentsService\",jm);jm.prototype.Y=function(a,b,c,d,e){jm.v.Y.apply(this,[a,b,c,d,e]);this.f&&(this.a=this.f.clone());return this};jm.prototype.configure=jm.prototype.Y;jm.prototype.g=function(a,b,c){a=this.aa().clone().T(\"incidents.json\").$(a);return fm(this,a,b,c)};jm.prototype.requestIncidents=jm.prototype.g;\njm.prototype.b=function(a,b,c,d,e,f){a=this.aa().clone().T([\"incidents/json\",c,a,b].join(\"/\")).$(f||{});return fm(this,a,d,e)};jm.prototype.requestIncidentsByTile=jm.prototype.b;hm.trafficIncidents={subDomain:\"traffic\",path:\"traffic/6.1\"};T.prototype.o=function(){return this.Y(new jm)};T.prototype.getTrafficIncidentsService=T.prototype.o;function km(){this.xf={}}function lm(a){var b,c=a.boxes,d,e;this.label=a.label;this.min=a.minLevel;this.max=a.maxLevel;this.b=[];if(c&&(b=c.length))for(d=c[0],e=new G(d[0],d[1],d[2],d[3]),this.b.push(e),this.a=new G(d[0],d[1],d[2],d[3]),a=1;a<b;a++)d=c[a],e=new G(d[0],d[1],d[2],d[3]),this.b.push(e),this.a.vb(e,!1,this.a)}lm.prototype.uc=function(a,b){var c;if(a>=this.min&&a<=this.max)if((c=this.b.length)&&this.a){if(this.a.uc(b))for(;c--;)if(this.b[c].uc(b))return!0}else return!0;return!1};function mm(a){var b=0,c,d,e=a.length;if(0===e)return b;for(c=0;c<e;c++)d=a.charCodeAt(c),b=(b<<5)-b+d,b|=0;return b}var nm=Function(\"return this\")();function om(a,b){function c(){k=Aa();se.font=g;h=Math.round(se.measureText(\"BESbswyMi\").width);-1===e.indexOf(h)?b():3E5<k-d?b(\"timeout\"):(l=50*++f,nm.setTimeout(c,Math.min(l,d+3E5-k)))}var d=Aa(),e=pm(),f=0,g=\"35px \"+a+\",\"+qm.join(\",\"),h,k,l;-1!==qm.indexOf(a)?b():nm.setTimeout(c,50)}\nfunction rm(a,b){function c(a){a?b(a):0===--d&&b()}var d=a.length;a.forEach(function(a){om(a,c)})}var qm=Ra(\"monospace serif\");function pm(){var a=[];qm.forEach(function(b){se.font=\"35px \"+b;a.push(Math.round(se.measureText(\"BESbswyMi\").width))});return a}function sm(a,b){var c=b||document,d=c.createElement(\"style\"),e;d.appendChild(c.createTextNode(\"\"));c.head.appendChild(d);e=d.sheet;a.forEach(function(a,b){e.insertRule(a,b)});return d}function tm(){}\ntm.prototype.pop=function(a){this[a]||(this[a]=[]);return this[a].pop()||nm.document.createElement(\"canvas\")};tm.prototype.push=function(a,b){this[b]||(this[b]=[]);this[b].push(a)};var um=new tm;function vm(a,b,c,d,e,f,g){var h=this;g=g||{};f=f?f:{};var k=a.aa().clone().T(b+\"/\"+a.Bb()+\"/\"+c).$(f),l=a.i;this.service_=a;this.tileBaseUrl_=k;Fk.call(this,{tileSize:d,max:512===d?19:20,min:512===d?2:0,getURL:function(a,b,c){var f=h.tileBaseUrl_.clone();l&&f.xa(l[(c+b+a)%l.length]);f.T(c+\"/\"+a+\"/\"+b+\"/\"+d+\"/\"+e);return f.toString()},crossOrigin:g.crossOrigin,uri:k.toString().replace(/_/g,\"\")+d});this.tileType_=b;this.scheme_=c;this.params_=f;this.copyrightKey_=c.split(\".\")[0];this.C=z(this.C,this);\nthis.getCopyrights=this.Ga;this.V=vc();a.addEventListener(\"versionupdate\",this.C)}v(vm,Fk);vm.prototype.MAX_STORE_TIME=2592E6;vm.prototype.F=function(){Fk.prototype.F.call(this);this.service_.removeEventListener(\"versionupdate\",this.C)};vm.prototype.Ga=function(a,b){var c=this.service_.Ga().xf[this.copyrightKey_],d,e=c?c.length:0,f=[];for(d=0;d<e;d++)c[d].uc(b,a)&&f.push(c[d]);return f};\nvm.prototype.C=function(){var a=this.service_;this.tileBaseUrl_=a.aa().clone().T(this.tileType_+\"/\"+a.Bb()+\"/\"+this.scheme_).$(this.params_);this.l(!1)};vm.prototype.Qc=function(){return this.V};r(\"H.service.MapTileProvider.prototype.canStore\",vm.prototype.Qc);vm.prototype.B=function(){return this.Qc()?uc():N.prototype.B.call(this)};r(\"H.service.MapTileProvider.prototype.getStorage\",vm.prototype.B);function wm(a){a=gm(hm.maptile,a);I.call(this);this.f=a.baseUrl;this.c=a.path;this.m=a.subDomain;this.i=a.shards;this.ra=(this.s=!!a.ignoreTypes)?null:a.type;this.g=a.version;this.l=new km;this.o={};this.yd=0}v(wm,I);r(\"H.service.MapTileService\",wm);function xm(a,b){for(var c={},d=a[b+\"s\"][b],e=d.length;e--;)c[d[e].id]=d[e];a[b+\"s\"]=c}\nwm.prototype.Y=function(a,b,c,d,e){this.a=(this.f||e).clone();this.m&&this.a.xa(this.m);this.ra&&this.a.xa(this.ra);this.c&&this.a.kc(this.c);\"newest\"===this.g&&ym(this);return this};wm.prototype.configure=wm.prototype.Y;wm.prototype.aa=function(){return this.a};wm.prototype.A=function(){return this.ra};wm.prototype.getType=wm.prototype.A;wm.prototype.Bb=function(){return this.g};wm.prototype.getVersion=wm.prototype.Bb;\nwm.prototype.Ga=function(){this.yd||(this.g&&\"newest\"!==this.g||\"traffic\"===this.ra)&&zm(this);return this.l};wm.prototype.getCopyrights=wm.prototype.Ga;\nfunction ym(a){var b=a.aa().clone().T(\"info\").$({output:\"json\"});a.i&&b.xa(a.i[0]);dm({url:b,vd:\"callback_func\",mc:function(b){b=JSON.parse(b.replace(/,\\s?\\]/g,\"]\")).response;var d;xm(b,\"map\");xm(b,\"scheme\");xm(b,\"tiletype\");xm(b,\"format\");xm(b,\"resolution\");xm(b,\"language\");if(\"newest\"===a.g&&\"traffic\"!==a.ra)for(d in b.maps)b.maps[d].hash&&b.maps[d].newest&&(a.g=b.maps[d].hash,a.dispatchEvent(\"versionupdate\"));a.j=b;a.dispatchEvent(\"infoupdate\")},Yc:function(a){throw Error(\"[\"+a+\"]: Could not fetch meta-info from map tile service @ \"+\nb.toString());},kf:!0})}function zm(a){var b=a.aa().clone().T(\"copyright\").T(a.Bb()).$({output:\"json\"});a.i&&b.xa(a.i[0]);a.yd=1;dm({url:b,vd:\"callback_func\",mc:function(b){this.yd=2;b=JSON.parse(b);var d=a.l,e;for(e in b)if(b.hasOwnProperty(e))for(var f=b[e],g=d.xf[e]||(d.xf[e]=[]),h=void 0,k=f.length,h=0;h<k;h++)g.push(new lm(f[h]));a.dispatchEvent(\"copyrightupdate\")},Yc:function(a){this.yd=-1;throw Error(\"[\"+a+\"]: Could not fetch copyrights from map tile service @\"+b.toString());},kf:!0})}\nwm.prototype.B=function(){return this.j};wm.prototype.getInfo=wm.prototype.B;wm.prototype.u=function(a,b,c,d,e,f){var g;g=mm(this.aa().clone().T(a+\"/\"+this.Bb()+\"/\"+b+\"/\"+c+\"/\"+d).$(e?e:{}).toString());var h=this.o[g];h||(h=new vm(this,a,b,c,d,e,f),this.o[g]=h);return h};wm.prototype.createTileProvider=wm.prototype.u;wm.prototype.b=function(a,b,c,d,e,f,g,h){a=this.u(a,b,c,d,e,h);return new nh(a,{opacity:f,dark:!!g})};wm.prototype.createTileLayer=wm.prototype.b;\nhm.maptile={type:\"base\",version:\"newest\",subDomain:\"maps\",path:\"maptile/2.1\",shards:[\"1\",\"2\",\"3\",\"4\"]};T.prototype.b=function(a){var b;b=gm(hm.maptile,a);var c;c=\"\"+(b.ignoreTypes?\"\":b.type);c+=b.path;c+=b.subDomain;c+=b.baseUrl;c+=b.shards?b.shards.join(\"\"):\"\";b=mm(c);c=this.a[b];c||(c=this.Y(new wm(a)),this.a[b]=c);return c};T.prototype.getMapTileService=T.prototype.b;function Am(a){this.f=a;this.gb=this.a(\"general\",\"default\")||Bm;this.c=new Ug(200)}Am.prototype.b=function(a,b){var c,d,e,f,g;for(g=1;g<arguments.length;g++)for(c in d=arguments[g],d)if(d.hasOwnProperty(c))for(e in a[c]||(a[c]={}),f=d[c],f)f.hasOwnProperty(e)&&void 0!==f[e]&&(a[c][e]=f[e]);return a};Am.prototype.Na=function(a,b){var c=this.a(\"spaceToGroup\",b);return Cm(this,a,c?c+\"\":void 0)};\nfunction Cm(a,b,c){var d,e,f;f=(b?b+\"_\":\"\")+(c?c:\"default\");d=a.gb;(e=a.c.get(f))?d=e:(b&&c?(d=Cm(a,b,void 0),e=Cm(a,void 0,c),b=a.a(\"venues\",b,\"groups\",c),d=a.b({},a.gb,d,e,b)):b&&!c?d=a.b({},a.gb,a.a(\"venues\",b,\"default\")):!b&&c&&(d=a.b({},a.gb,a.a(\"general\",\"groups\",c))),a.c.add(f,d,1));return d}Am.prototype.a=function(a){for(var b=this.f,c=arguments,d=c.length,e=0;e!==d;)if(b=b[c[e++]],!b)return;return b};\nvar Bm={space:{fillColor:\"rgba(198, 175, 255, .7)\",strokeColor:\"rgb(162, 141, 216)\",lineWidth:.5},spaceLabel:{fillColor:\"rgb(78,66,111)\"},floor:{fillColor:\"rgba(249, 244, 253, .7)\",strokeColor:\"rgba(255, 255, 255, .7)\",lineWidth:1}};function Dm(a,b,c,d,e,f,g,h){this.K=[];this.A={};Nk.call(this,a,b,c,d,e,f,g,h)}v(Dm,Nk);function Em(){}Em.prototype.jc=function(){};r(\"H.service.remote.IObject.prototype.retain\",Em.prototype.jc);Em.prototype.u=function(){};r(\"H.service.remote.IObject.prototype.release\",Em.prototype.u);function Fm(a,b){var c={};this.I=a;Ca(c,b||c);Ak.call(this,c);this.ic={};Gm(this)}v(Fm,Ak);r(\"H.service.remote.ObjectProvider\",Fm);Fm.prototype.J=function(){Ak.prototype.J.call(this)};function Gm(a){a=a.N(Oe.SPATIAL);a.c(a.a+1,Le.ADD)}var Hm=[];Fm.prototype.o=function(){return Hm};Fm.prototype.requestMarkers=Fm.prototype.o;Fm.prototype.l=function(){return Hm};Fm.prototype.requestDomMarkers=Fm.prototype.l;Fm.prototype.j=Ae;Fm.prototype.providesMarkers=Fm.prototype.j;Fm.prototype.i=Ae;\nFm.prototype.providesDomMarkers=Fm.prototype.i;Fm.prototype.s=function(){return!0};Fm.prototype.providesSpatials=Fm.prototype.s;Fm.prototype.m=function(){return Hm};Fm.prototype.requestSpatials=Fm.prototype.m;function Im(a){return a.getVisibility(!0)}Fm.prototype.c=function(a,b){var c=Jm(this,a,Km);b&&(c=c.filter(Im));return c};Fm.prototype.requestSpatialsByTile=Fm.prototype.c;function Jm(a,b,c){var d=b.i&&b.i[c],e;!d&&(e=b.u)&&(delete b.u,(b.i=a=a.I.parse(a,b,e))&&(d=a[c]));return d||Hm}\nFm.prototype.U=function(a){var b=a.ta();if(this.ic[b])throw new jc(this.U,\"Remote object \"+b+\" already added\");return this.ic[b]=a};Fm.prototype.a=function(a){delete this.ic[a.ta()]};var Km=\"spatials\";function Lm(a,b,c){Fm.call(this,b,c);this.b=a;this.responseQueue_=[];Mm(this.b)||(this.Td=z(this.Td,this),this.b.addEventListener(\"statechange\",this.Td));this.u=a.m;this.f=0;this.B={onSpaceCreated:c&&c.onSpaceCreated,floorLevel:0,styler:null};this.requestSpatialsByTile=z(this.c,this)}v(Lm,Fm);Lm.prototype.S=function(a,b,c,d){this.of?this.Jg.apply(this,arguments):d||this.responseQueue_.push({ki:a,response:c,Hh:b});d&&(a.A[b]=!0)};function Nm(a){return a.getVisibility(!0)}\nLm.prototype.c=function(a,b,c){var d;this.Pg||Om(this);d=a.a;b&&(d=d.filter(Nm));if(!c){b=this.f;var e,f,g,h;if(!a.A[b]&&Mm(this.b)){e=this.b.aa();c=a.x;f=a.y;h=g=a.z;for(var k=1,l;h--;)l=1<<h,k*=4,k+=(c&l&&1)|(f&l&&2);h=k.toString(4).substr(1);e=e.clone().T(\"0/tiles-ia\").T(\"L\"+b).T(h+\".json\");this.u&&e.xa(this.u[(c+f+g)%this.u.length]);c=new Fh(\"text/plain\",e.toString());c.then(z(this.S,this,a,b),rc);a.A[b]=!0}a.A[this.f]=!0}a.j&&(d=d.concat(a.j),delete a.j);return d};\nr(\"H.service.venues.ObjectProvider.prototype.requestSpatialsByTile\",Lm.prototype.c);p=Lm.prototype;p.Ic=function(a){var b,c,d;for(b in this.ic)for(c in d=this.ic[b].C,d)d[c].Ic(a);Gm(this);Qg(this);this.f=a};p.Jg=function(a,b,c,d){if(!d&&(this.B.floorLevel=b,b=(b=this.I.parse(this,a,c,this.B))&&b.spatials))for(a.j=a.j?a.j.concat(b):b,a=b.length;a--;)b[a].ua(Le.ADD)};p.Td=function(){Mm(this.b)&&(Pm(this),this.b.removeEventListener(\"statechange\",this.Td))};\nfunction Pm(a){Mm(a.b)&&a.of&&a.dispatchEvent(\"reload\")}function Om(a){a.Pg=!0;Qm(a,function(b,c){c?a.dispatchEvent(\"error\"):(a.B.styler=b,Rm(a,z(a.bi,a)))})}p.bi=function(a){a?this.dispatchEvent(\"error\"):(this.responseQueue_.forEach(function(a){this.Jg(a.ki,a.Hh,a.response)},this),this.responseQueue_=null,this.of=!0,Pm(this))};p.Pg=!1;p.of=!1;function Qm(a,b){(new Fh(\"application/json\",a.b.j.clone().T(\"styles/styles.json\").toString())).then(function(a){b(new Am(a))},function(a){b(null,a)})}\nvar Sm=0;\nfunction Rm(a,b){var c=a.b.j.clone().T(\"fonts\"),d=document,e=[],f,g=[];2===Sm?b():(Tm.forEach(function(a){g.push(\"FiraGO-Regular\".replace(\"{name}\",a))}),1!==Sm&&(Tm.forEach(function(a,b){f=c.clone().T(g[b]);e.push('@font-face {font-family: \"FiraGO-Regular\";src: url(\"{url}.woff2\") format(\"woff2\"),url(\"{url}.woff\") format(\"woff\"),url(\"{url}.ttf\") format(\"truetype\");font-weight: normal;font-style: normal;}'.replace(/\\{name\\}/g,a).replace(/\\{url\\}/g,f.toString()))}),a.A=sm(e,d),Sm=1),rm(g,function(c){Sm=c?\n0:2;c&&a.A&&Fe(a.A);b(c)}))}var Tm=[\"\"];function Um(a,b,c,d){P.call(this,Vm(a));this.i=c;this.f=d;this.o={};this.Ya=b;this.c=0}v(Um,P);r(\"H.service.venues.Building\",Um);Um.prototype.ta=function(){return this.Ya};Um.prototype.getId=Um.prototype.ta;Um.prototype.Aa=function(){return this.Ca};Um.prototype.getVenue=Um.prototype.Aa;Um.prototype.sa=function(){return this.i};Um.prototype.getMinLevel=Um.prototype.sa;Um.prototype.Xa=function(){return this.f};Um.prototype.getMaxLevel=Um.prototype.Xa;Um.prototype.Ua=function(){return this.c};\nUm.prototype.getCurrentLevel=Um.prototype.Ua;Um.prototype.Ic=function(a){var b,c,d;if(!isNaN(a)&&(b=this.i,c=this.f,a!==this.c))for(this.c=a;b<=c;b++)(d=this.o[b])&&d.setVisibility(b===a);return this.c};Um.prototype.$c=function(a){return this.o[a]};Um.prototype.getFloor=Um.prototype.$c;Um.prototype.ba=function(a,b){this.i=Math.min(this.i,a);this.f=Math.max(this.f,b)};Um.prototype.adjustMinMaxLevels=Um.prototype.ba;function Wm(a,b){P.call(this,Vm(a));this.C={};this.f=b;a.U(this)}v(Wm,P);r(\"H.service.venues.Venue\",Wm);Wm.prototype.N=function(a){return this.C[a]};Wm.prototype.getBuilding=Wm.prototype.N;Wm.prototype.c=function(){return this.C};Wm.prototype.getBuildings=Wm.prototype.c;Wm.prototype.ta=function(){return this.f};Wm.prototype.getId=Wm.prototype.ta;function Xm(a,b,c,d){d=d||Ym;this.Gc={};d.provider=a;this.invalidate=rc;Xm.v.constructor.call(this,b,d);delete this.invalidate;c&&(this.f=c);this.ua(Le.ADD)}v(Xm,Ff);r(\"H.service.remote.Spatial\",Xm);var Ym={};Xm.prototype.ta=function(){return this.f||Ff.prototype.ta.call(this)};Xm.prototype.getId=Xm.prototype.ta;Xm.prototype.jc=Function();Xm.prototype.retain=Xm.prototype.jc;Xm.prototype.u=Function();Xm.prototype.release=Xm.prototype.u;function Zm(a,b){this.a=a;b&&(this.b=b)}var $m=new Zm([]);\nXm.prototype.ac=function(a){return(this.Gc[a.key]||$m).a};Xm.prototype.getGeometriesForTile=Xm.prototype.ac;Xm.prototype.ba=function(a){return(this.Gc[a.key]||$m).b};Xm.prototype.getLabels=Xm.prototype.ba;function an(a,b,c,d){a.Gc[b.key]=new Zm(c,d)};function bn(a,b,c){this.ra=c&&c.type||\"\";Xm.call(this,a,!0,b);this.g(c)}v(bn,Xm);r(\"H.service.venues.Space\",bn);bn.prototype.i=function(){return this.ra};bn.prototype.getType=bn.prototype.i;bn.prototype.c=function(){return\"floor/polygon\"===this.ra};bn.prototype.isFloorSpace=bn.prototype.c;bn.prototype.b=function(a){a&&(this.Lh=new yf(a))};bn.prototype.initLabelStyle=bn.prototype.b;bn.prototype.$c=function(){var a=this.Ca;return this.isFloorSpace()?a:a&&a.Ca};bn.prototype.getFloor=bn.prototype.$c;\nbn.prototype.a=0;bn.prototype.jc=function(){++this.a};bn.prototype.retain=bn.prototype.jc;bn.prototype.u=function(){var a=--this.a,b;a||(b=this.$c(),this.isFloorSpace()?b.hb&&(b.a(b.hb),b.hb=null,cn(b)):b&&(delete b.i[this.ta()],b.c.a(this),cn(b)));return 1>a};bn.prototype.release=bn.prototype.u;function dn(){}dn.prototype.parse=function(){};r(\"H.service.remote.IParser.prototype.parse\",dn.prototype.parse);function en(a,b,c){P.call(this,Vm(a));this.f=c;this.hb=new bn(a,b.id,b);this.U(this.hb);this.c=new P(Vm(a));this.U(this.c);this.i={}}v(en,P);r(\"H.service.venues.Floor\",en);en.prototype.sa=function(){return this.f};en.prototype.getLevel=en.prototype.sa;en.prototype.o=function(){return this.hb};en.prototype.getFloorSpace=en.prototype.o;en.prototype.ba=function(){return this.c};en.prototype.getSpaces=en.prototype.ba;en.prototype.N=function(){return this.Ca};en.prototype.getBuilding=en.prototype.N;\nen.prototype.getData=function(){return this.hb&&this.hb.getData()};en.prototype.getData=en.prototype.getData;en.prototype.g=function(a){this.hb.g(a);return this};en.prototype.setData=en.prototype.g;en.prototype.$f=function(a){return this.i[a]};en.prototype.getSpace=en.prototype.$f;function cn(a){if(!a.c.b&&!a.hb){var b=a.N(),c=a.f;c===b.c&&(b.c=0);delete b.o[c];b.a(a);b.b||(a=b.Ca,delete a.C[b.ta()],a.a(b),a.b||a.Pa().a(a))}};function fn(){}var gn;fn.prototype.a=Math.PI/180;function hn(a,b){return a&&a.category&&a.category[b||\"id\"]}function jn(a){var b,c;return a.sort(function(a,e){b=a.object.type;c=e.object.type;return b>c?-1:b<c?1:0})}\nfn.prototype.parse=function(a,b,c,d){var e=d.floorLevel,f=d.onSpaceCreated;d=d.styler;var g=[],h,k,l,m,n,q,u,t,y,J={};gn=!1;c=c.replace(/''( )?/g,'$1\\\\\"');try{c=nm.JSON.parse(c)}catch(U){gn=!0}if(c.length)for(c=jn(c),h=c.length;h--;){k=c[h];l=k.area;n=l.length;u=t=q=void 0;(t=0<n)||(gn=!0,t=void 0);if(t)for(q=Array(n/2);n;)u=l[--n],t=l[--n],q[n/2]=new M(t,u);l=q?{Ra:[q]}:A;k=k.object;t=y=x;if(1!==k.type)switch(n=k.type.replace(\"/polygon\",\"\"),n){case \"floor\":n=q=k.buildingId;(t=a.ic[n])||(t=new Wm(a,\nn),t.ga(a));u=k.buildingMinLevel;y=k.buildingMaxLevel;(n=t.N(q))?n.adjustMinMaxLevels(u,y):(n=new Um(a,q,u,y),q=t,t=n,q.C[t.ta()]=t,q.U(t),n.Ic(a.f));0>b.K.indexOf(n)&&b.K.push(n);(q=n.$c(e))?(n=q.hb,t=n.ac(b),t.length&&(l?l.Ra=t[0].Ra.concat(l.Ra):l=t[0])):(t=q=new en(a,k,e),u=t.f,t.setVisibility(u===n.c),n.o[u]=t,n.U(t),n=q.hb,f&&f(n),u=hn(q.getData(),\"profileKey\"),y=d.Na(u,void 0),n.O(y.floor));J[k.id]=q;0>g.indexOf(n)&&g.push(n);l&&an(n,b,[l]);break;case \"hollow\":t=\"hollow-area\";case \"space\":if(m=\nk.id,q=J[/_d$/.test(k.outerAreaId)?k.outerAreaId:k.outerAreaId+\"_d\"])n=q.$f(m),u=hn(q.getData(),\"profileKey\"),t=t||hn(n?n.getData():k),n||(y=n=new bn(a,m,k),q.i[y.ta()]=y,q.c.U(y),y=d.Na(u,t),n.O(y.space),f&&f(n)),n.jc(),(k=k.label)&&k.firstLinePos?(y=y||d.Na(u,t),q=n.Lh,q=[{lines:Ra(k.text,\"\\n\"),angle:k.rotation*this.a,font:\"FiraGO-Regular\",size:k.font.size,lineHeight:k.font.lineHeight,color:q&&q.fillColor||y.spaceLabel.fillColor,x:k.firstLinePos[0],y:k.firstLinePos[1]}],\"nokiapuretextac_rg-webfont\"===\nk.font.face&&(q[0].size=Math.floor(k.font.size/1.26))):q=null,g.push(n),l&&an(n,b,[l],q)}}else gn=!0;return gn?void 0:{spatials:g}};r(\"H.service.venues.Parser.prototype.parse\",fn.prototype.parse);function kn(a,b){var c=b||{};if(!(a&&a instanceof ln))throw Error(\"InvalidArgument: service required\");this.Re=z(this.Re,this);this.b=new Lm(a,new fn,{min:16,max:20,onSpaceCreated:c.onSpaceCreated});this.b.ga(this);this.Qe=z(this.Qe,this);this.b.addEventListener(\"update\",this.Qe);this.df=z(this.df,this);this.b.addEventListener(\"reload\",this.df);this.cf=z(this.cf,this);this.b.addEventListener(\"error\",this.cf);this.Se=c.pixelRatio||c.pixelratio||1;this.tileSize=256;this.f=Sg(this.tileSize,this.Se);\nN.call(this,{min:16,max:20});this.N(new Ug(c.tileCacheSize||256,z(this.Re,this)))}v(kn,N);r(\"H.service.venues.TileProvider\",kn);p=kn.prototype;p.Se=1;p.Qe=function(){this.dispatchEvent(\"update\")};p.cf=function(){this.dispatchEvent(\"error\")};p.df=function(){this.l(!0)};p.Re=function(a,b){var c,d,e;c=b.a;for(e=c.length;e--;)d=c[e],delete d.Gc[b.key],d.u();b.data&&um.push(b.o(),this.tileSize);b.m()};p.Ic=function(a){this.b.Ic(a)};kn.prototype.setCurrentLevel=kn.prototype.Ic;kn.prototype.C=function(){return this.b.f};\nkn.prototype.getCurrentLevel=kn.prototype.C;kn.prototype.c=function(a,b,c,d){var e;this.g.get(this.getTileKey(a,b,c))?d(null,null):e=nm.setTimeout(function(){d(null,null)},500);return{cancel:function(){nm.clearTimeout(e)}}};kn.prototype.requestInternal=kn.prototype.c;kn.prototype.P=function(a,b,c){var d=um.pop(this.tileSize),e=this.g.get(this.getTileKey(a,b,c));e||(e=new Dm(this.A(a,b,c),a,b,c,this.tileSize,this.Se,c+this.f,this.b));e.ha(d)||um.push(d,this.tileSize);return e};\nkn.prototype.createTileInternal=kn.prototype.P;function ln(a){var b=hm.venues;a=gm(b,a||{});I.call(this);this.f=b.baseUrl;this.c=a.path;this.g=a.subDomain;this.m=b.shards}v(ln,I);r(\"H.service.venues.Service\",ln);var mn={ERROR:-1,INIT:0,READY:1};ln.State=mn;\nln.prototype.Y=function(a,b,c,d,e){this.a=(this.f||e).clone();this.j=this.a.clone().xa(\"js\").T(\"statics/venues\").sf();this.g&&this.a.xa(this.g);this.ra&&this.a.xa(this.ra);this.c&&this.a.kc(this.c);a=hm.venueSignature;b=this.a.clone();b.xa(a.subDomain);b.T(a.path);b.T(a.version);this.u=b;this.o=this.a.clone();this.G===mn.INIT&&this.b();return this};ln.prototype.configure=ln.prototype.Y;function Mm(a){return a.G===mn.READY}ln.prototype.aa=function(){return Mm(this)?this.a:void 0};\nln.prototype.b=function(){var a=this;(new Fh(\"application/json\",this.u.toString())).then(function(b){var c=b.SignatureTokens,d=(b=new Date(b.Expires))?b.getTime()-Aa()-36E5:0;a.a.$(c);b&&4E9>d&&nm.setTimeout(z(a.b,a),Math.max(d,0));nn(a,mn.READY)},function(){nn(a,mn.ERROR,\"Error fetching signature\")})};\nln.prototype.l=function(a,b,c){var d=hm.venuesDiscovery;a=this.o.clone().xa(d.subDomain).T(d.path).T(d.version).$(gm(a,d.params));(new Fh(\"application/json\",a.toString())).then(b,function(a){a.json().then(function(a){c(a.status.message)},function(){c(a.statusText)})})};ln.prototype.discover=ln.prototype.l;ln.prototype.i=function(a){return new nh(new kn(this,a))};ln.prototype.createTileLayer=ln.prototype.i;ln.prototype.G=mn.INIT;ln.prototype.getState=function(){return this.G};\nln.prototype.getState=ln.prototype.getState;function nn(a,b,c){var d=new Ac(\"statechange\",a);c&&(d.errorCode=c);a.G=b;a.dispatchEvent(d)}T.prototype.m=function(a){return this.Y(new ln(a))};T.prototype.getVenueService=T.prototype.m;var on={subDomain:\"venue.maps\",path:\"\",shards:Ra(\"1 2 3 4\").map(function(a){return\"static-\"+a})};hm.venues=on;hm.venueSignature={version:\"v1\",subDomain:\"signature\",path:\"venues/signature\"};hm.venuesDiscovery={version:\"v1\",subDomain:\"discovery\",path:\"venues/discovery\"};var pn={};function Vm(a){pn.provider=a;return pn};function qn(){this.a={}}qn.prototype.qb=function(a,b){var c=a+b,d,e,f;if(!(d=this.a[c])){f={size:{w:26,h:32},anchor:{x:13,y:30}};if(\"CLOSURE\"!==a)switch(d=rn,a){case \"CONGESTION\":d=d.replace(\"{{icon}}\",sn);break;case \"ROADWORKS\":d=d.replace(\"{{icon}}\",tn);break;case \"ACCIDENT\":d=d.replace(\"{{icon}}\",un);break;default:d=d.replace(\"{{icon}}\",vn)}else d=wn,f.anchor.y=16;e=xn[b]||xn.BLOCKING;d=d.replace(\"{{color}}\",e);this.a[c]=d=new ni(d,f)}return d};\nvar xn={BLOCKING:\"#323232\",VERYHIGH:\"#d5232f\",HIGH:\"#ffa100\"},sn='<path d=\"m 18,15 0,0 c 0,-0.1 0,-0.2 0,-0.4 l 0,-0.2 c 0,-0.1 0,-0.2 0,-0.4 0,0 0,0 0,0 0.6,0 1.1,-0.4 1.1,-1 0,-0.5 -0.5,-1 -1,-1 -0.7,0 -1.1,0.5 -1.1,1 -0.1,0 -0.3,-0.1 -0.4,-0.1 l -0.6,0 -0.3,-0.5 C 15.2,11.6 14.3,11 13.3,11 L 18,11 17.2,9.6 C 17,9.3 16.7,9 16.3,9 L 12.8,9 C 12.4,9 12,9.3 11.8,9.6 L 11.1,11 9.8,11 C 9.7,11 9.6,11 9.5,11 9.2,11 9,10.9 9,10.6 L 9,10.4 C 9,10.2 9.2,9.9 9.5,9.9 l 1.2,0 0.6,-1.04 c 0.3,-0.5 0.9,-0.9 1.5,-0.9 l 3.5,0 c 0.6,0 1.2,0.4 1.5,0.9 l 0.6,1.04 1.2,0 c 0.2,0 0.4,0.3 0.4,0.5 l 0,0.2 c 0,0.3 -0.2,0.5 -0.4,0.5 l -0.1,0 c 0.3,0.3 0.5,0.7 0.5,1.1 l 0,3.4 c 0,0.2 -0.2,0.4 -0.4,0.4 l -1.1,0 C 18.3,16 18,15.8 18,15.6 L 18,15 z M 8,18.1 c 0.6,0 1.1,-0.5 1.1,-1.1 0,-0.5 -0.5,-1 -1.1,-1 -0.6,0 -1.1,0.5 -1.1,1 0,0.6 0.5,1.1 1.1,1.1 m 7,0 c 0.6,0 1.1,-0.5 1.1,-1.1 0,-0.5 -0.5,-1 -1.1,-1 -0.5,0 -1,0.5 -1,1 0,0.6 0.5,1.1 1,1.1 M 14.2,13.6 C 14,13.3 13.7,13 13.3,13 L 9.8,13 C 9.4,13 9,13.3 8.8,13.6 L 8.1,15 15,15 14.2,13.6 z m -8.2,1 0,-0.2 c 0,-0.2 0.2,-0.5 0.5,-0.5 l 1.1,0 0.7,-1 C 8.6,12.4 9.2,12 9.8,12 l 3.5,0 c 0.6,0 1.2,0.4 1.5,0.9 l 0.6,1 1.2,0 c 0.2,0 0.4,0.3 0.4,0.5 l 0,0.2 c 0,0.3 -0.2,0.5 -0.4,0.5 l -0.1,0 c 0.3,0.3 0.5,0.7 0.5,1.1 l 0,3.4 c 0,0.2 -0.2,0.4 -0.4,0.4 l -1.1,0 C 15.3,20 15,19.8 15,19.6 L 15,19 8,19 8,19.6 C 8,19.8 7.8,20 7.5,20 l -1,0 C 6.2,20 6,19.8 6,19.6 l 0,-3.4 c 0,-0.4 0.2,-0.8 0.6,-1.1 l -0.1,0 C 6.2,15.1 6,14.9 6,14.6\" fill=\"#ffffff\" />',\ntn='<path d=\"m 9.24,13.2 -3.7,6.8 1.3,0 2.8,-5.1 1.36,1.5 0,3.6 1.1,0 0,-4 -1.4,-1.6 -1.46,-1.2 z M 14.2,9.5 c 0.7,0 1.3,-0.5 1.3,-1.21 0,-0.7 -0.6,-1.2 -1.3,-1.2 -0.7,0 -1.2,0.5 -1.2,1.2 0,0.71 0.5,1.21 1.2,1.21 m -4.46,0.5 1.06,0 -0.96,2.1 -1,-0.8 0.9,-1.3 z m 2.56,4 -1,-0.7 1,-1.9 0,2.6 z m 6.9,1.7 c -0.4,-0.5 -1.5,-1.1 -2.3,0 -0.2,0.3 -0.6,0.7 -0.9,1.2 l -2.7,-2.1 0,-5 -0.8,-0.7 -3.26,0 -1.5,2.3 7.86,6 C 14.7,18.6 13.8,20 13.8,20 l 6,0 1.5,-1.6 c 0,0 -1.7,-2.2 -2.1,-2.7\" fill=\"#ffffff\" />',un=\n'<path d=\"m 10.2,15.9 c 0.4,-0.5 1,-0.5 1.4,0 0.5,0.4 0.5,1 0,1.4 -0.4,0.4 -1,0.4 -1.4,0 -0.45,-0.4 -0.45,-1 0,-1.4 m 4.9,-5 c 0.4,-0.4 1.1,-0.4 1.5,0 0.4,0.4 0.4,1.1 0,1.5 -0.4,0.4 -1.1,0.4 -1.5,0 -0.4,-0.4 -0.4,-1.1 0,-1.5 m 2.6,3.8 c 0.1,0.3 0,0.7 -0.3,1 l -1.9,1 c 0,0 0,0.8 0,1.1 0,0.3 0,0.2 -0.1,0.3 -0.1,0.1 -0.3,0.2 -0.5,0.2 l -2.6,-0.3 4.9,-4.9 0.5,1.6 z m -6.5,5 0.1,0.2 c 0.2,0.1 0.5,0.1 0.7,0 l 0.8,-0.9 1.8,0.1 c 1.1,0 1.4,0 1.7,-0.6 l 0.1,-1.3 1.8,-0.8 c 0.4,-0.4 0.6,-1.1 0.4,-1.7 l -0.3,-1.1 0.8,-0.8 c 0.2,-0.2 0.2,-0.5 0,-0.7 L 19,12 c -0.2,-0.2 -0.5,-0.2 -0.7,0 l -0.1,0.1 c 0.1,-0.5 -0.1,-0.9 -0.4,-1.3 L 15.5,8.44 C 15.3,8.26 15,8.26 14.8,8.44 l -0.7,0.74 c -0.2,0.19 -0.2,0.49 0,0.68 l 0.3,0.34 -4.92,5 -0.36,-0.4 C 8.93,14.6 8.63,14.6 8.45,14.8 L 7.7,15.6 c -0.18,0.1 -0.18,0.4 0,0.6 l 2.4,2.4 c 0.3,0.3 0.7,0.4 1.2,0.4 l -0.1,0.1 c -0.2,0.2 -0.2,0.5 0,0.7 m 5.6,-0.8 3.9,0 1.6,-2 -5.5,2 z m -8.08,0 -3.28,-1.8 0.9,1.8 2.38,0 z\" fill=\"#ffffff\" />',\nvn='<path d=\"m 12.9,15.1 c 0.6,0 1.1,-0.5 1.1,-1 l 0.4,-5.9 c 0,-0.6 -0.6,-1.04 -1.5,-1.04 -0.8,0 -1.4,0.44 -1.4,1.04 l 0.3,5.9 c 0,0.5 0.6,1 1.1,1 m 0,1.3 c -0.7,0 -1.3,0.6 -1.3,1.3 0,0.8 0.6,1.4 1.3,1.4 0.8,0 1.4,-0.6 1.4,-1.4 0,-0.7 -0.6,-1.3 -1.4,-1.3\" fill=\"#ffffff\" />',rn='<svg width=\"26\" height=\"32\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m 16.8,29.4 c 0,-1.1 -1.8,-2 -4,-2 -2.2,0 -4.01,0.9 -4.01,2 0,1.1 1.81,2 4.01,2 2.2,0 4,-0.9 4,-2\" style=\"fill:#878787\"/><path d=\"m 24.1,17.8 c 1.6,-1.6 1.6,-3.8 0,-5.7 L 15.8,1.9 C 15,0.998 14,0.498 12.9,0.498 11.8,0.498 10.7,1.1 10,1.9 L 1.7,12.1 c -1.6,1.9 -1.6,4.1 0,5.7 L 12.9,29 24.1,17.8 z\" stroke=\"#fff\" stroke-width=\"1\" fill=\"{{color}}\" />{{icon}}</svg>',\nwn='<svg width=\"26\" height=\"32\" xmlns=\"http://www.w3.org/2000/svg\"><circle cx=\"13\" cy=\"15\" r=\"11\" fill=\"{{color}}\" stroke=\"#ffffff\" stroke-width=\"1\"/><rect x=\"6\" y=\"13\" width=\"14\" height=\"5\" fill=\"#ffffff\" /></svg>';function yn(a,b,c){c=c?c:{};c.criticality||(c.criticality=\"major,critical\");if(!(a instanceof jm))throw Error(\"IllegalArgument: service\");dh.call(this,{max:20,min:8,requestData:z(this.Ea,this)});this.I=new qn;this.P=a;this.b=c;this.l=z(this.l,this);this.V=setInterval(this.l,b||18E4)}v(yn,dh);r(\"H.service.TrafficIncidentsProvider\",yn);yn.prototype.f={minor:\"HIGH\",\"low impact\":\"HIGH\",major:\"VERYHIGH\",critical:\"BLOCKING\"};\nyn.prototype.Ea=function(a,b,c,d,e){var f=this,g=this.f,h=this.I;return this.P.b(a,b,c,function(a){var b=[];a=a.TRAFFIC_ITEMS;var c,e,q,u;if(a)for(a=a.TRAFFIC_ITEM,u=a.length;u--;){c=a[u];e=c.TRAFFIC_ITEM_TYPE_DESC;switch(e){case \"ACCIDENT\":case \"CONGESTION\":q=e;break;case \"CONSTRUCTION\":q=\"ROADWORKS\";break;default:q=\"OTHER\"}q=h.qb(q,g[c.CRITICALITY.DESCRIPTION]);e=c.LOCATION.GEOLOC.ORIGIN;e=new ti({lat:e.LATITUDE,lng:e.LONGITUDE},{provider:f,icon:q});e.g(c);b.push(e)}d(b)},e,this.b)};\nyn.prototype.J=function(){dh.prototype.J.call(this);clearInterval(this.V)};function zn(a){var b;if(a)for(this.a={},b=a.length;b--;)this.a[a[b]]=!0;this.Wg={}}var An;zn.prototype.a={};zn.prototype.parse=function(a,b,c){var d,e,f,g,h,k;An=!1;try{c=nm.JSON.parse(c)}catch(l){An=!0}if(c&&(d=c.metadata))for(e in k={spatials:[]},d){if(c=!this.a[e]&&(f=Bn[e]))(g=d[e])||(An=!0,g=void 0),c=g;if(c)for(c=g.length;c--;){var m;(m=g[c])||(An=!0,m=void 0);(h=m)&&f(b,a,this,e,h,k)}}else An=!0;return An?void 0:k};r(\"H.service.metaInfo.Parser.prototype.parse\",zn.prototype.parse);\nvar Bn={\"street labels\":function(a,b,c,d,e,f){var g;(g=e.vertices)||(An=!0,g=void 0);if(g){var h=g.length,k,l,m;(l=0<h)||(An=!0,l=void 0);if(l)for(k=Array(h/2);h;)m=g[--h],l=g[--h],k[h/2]=new M(l,m);k=k?{Ra:[k]}:A;h=+e[\"font size\"]/a.Tb;g=c.Wg[h];g||(Cn.lineWidth=h,g=c.Wg[h]=c.gb.f(Cn));Dn(a,b,k,!1,g,e,d,f)}delete e.vertices},\"city center labels\":function(a,b,c,d,e,f){Dn(a,b,En(e,new Rf([])),!0,c.gb,e,d,f)},labels:function(a,b,c,d,e,f){var g;(g=e[\"bounding boxes\"])||(An=!0,g=void 0);if(g){for(var h=\ng.length,k=new Rf([]),l;h--;){var m;(m=g[h])||(An=!0,m=void 0);(l=m)&&En(l,k)}Dn(a,b,k,!0,c.gb,e,d,f)}delete e[\"bounding boxes\"]},buildings:function(a,b,c,d,e,f){var g=e.id,h=b.ic[g],k,l,m,n=[],q=[];(k=e)||(An=!0,k=void 0);if(k&&((l=k.vertices)||(An=!0,l=void 0),l)){var u;(u=k.polygons)||(An=!0,u=void 0);(m=u)&&n.push.apply(n,Fn(l,m));(k=k.outlines)||(An=!0,k=void 0);(m=k)&&q.push.apply(q,Fn(l,m))}m=n.length;n.push.apply(n,q);q=new Rf(n,Kb,m);(n=n.length)||(An=!0,n=void 0);n&&(h?(an(h,a,[q]),f.spatials.push(h)):\n(h=Dn(a,b,q,!0,c.gb,e,d,f,g),b.U(h)))}};Bn[\"transit stops\"]=Bn.POIs=Bn.labels;var Gn=[\"box 2\",\"box 1\",\"annotation box\",\"icon box\"];function En(a,b){for(var c=Gn.length,d,e;c--;)if(d=Gn[c],e=a[d]){var f=e[0],g=e[1],h=e[2];e=e[3];b.Ra.push([new M(f,g),new M(f+h,g),new M(f+h,g+e),new M(f,g+e)]);delete a[d]}return b}\nfunction Fn(a,b){var c=b.length,d,e,f,g,h;if(0<c)for(e=Array(c);c--;)if((d=b[c])||(An=!0,d=void 0),d&&(g=d.length,0<g))for(e[c]=f=Array(g);g--;)h=2*d[g],f[g]=new M(a[h],a[h+1]);return e||[]}var Hn={};function Dn(a,b,c,d,e,f,g,h,k){Hn.style=e;d=new Xm(b,d,k,Hn);c&&an(d,a,[c]);In(f);f.category=g;d.g(f);h.spatials.push(d);d.ga(b);return d}zn.prototype.gb=new yf({strokeColor:\"transparent\",fillColor:\"transparent\",lineWidth:0});var Cn={};\nfunction In(a){var b,c=!1;switch(typeof a){case \"object\":if(a instanceof Array)for(b=a.length;b--;)In(a[b])?c=!0:delete a[b];else if(a)for(b in a)In(a[b])?c=!0:delete a[b];break;case \"number\":c=!0;break;default:c=!!a}return c};function Jn(a,b,c){c=c||{};b=b||{};var d=c.tileType||\"maptile\",e=c.Mi||\"normal.day\";N.call(this,{min:0,max:20});!0===b.pois&&(b.pois=\"!F\");this.b=b;if(!(a&&a instanceof Kn))throw Error(\"InvalidArgument: service required\");this.O=a;this.I=z(this.I,this);this.O.addEventListener(\"versionupdate\",this.I);this.f=a.aa().clone().T(d+\"/\"+a.Bb()+\"/\"+e).$(this.da).$(b);this.Ta=a.g||null;this.Ea=c.pixelRatio||c.pixelratio||1;this.tileSize=c.tileSize||256;this.tileType=d;this.scheme=e;this.C=new Fm(new zn(c.categoryFilter));\nthis.C.ga(this);this.V=z(this.V,this);this.C.addEventListener(\"update\",this.V);N.call(this,{min:0,max:20});this.N(new Ug(c.tileCacheSize||256,z(this.Wa,this)))}v(Jn,N);r(\"H.service.metaInfo.TileProvider\",Jn);Jn.prototype.Wa=function(a,b){for(var c=b.a,d=c.length,e;d--;)e=c[d],delete e.Gc[b.key],e.u();b.data&&(um.push(b.o(),this.tileSize),b.m())};Jn.prototype.V=function(){this.dispatchEvent(\"update\")};\nJn.prototype.c=function(a,b,c,d,e){var f=this.f.clone(),g=this.Ta,h=this.tileSize,k=this.getTileKey(a,b,c),k=this.g.get(k),l,m,n;k&&!k.vc()?(d(um.pop(this.tileSize),null),l={cancel:function(){}}):(g&&f.xa(g[(c+b+a)%g.length]),f.T(c+\"/\"+a+\"/\"+b+\"/\"+h+\"/png8\"),m=nm.setTimeout(function(){n=(new Fh(\"text/plain\",f.toString())).then(function(a){d(null,a)},e)},500));return l||{cancel:function(){n?n.cancel():nm.clearTimeout(m)}}};Jn.prototype.requestInternal=Jn.prototype.c;\nJn.prototype.P=function(a,b,c,d,e){var f=this.C,g;g=d||um.pop(this.tileSize);if(d)a=this.g.get(this.getTileKey(a,b,c)),a.ha(d);else if(d=a=new Nk(this.A(a,b,c),a,b,c,this.tileSize,this.Ea,c+0,f),delete d.i,d.u=e,a.ha(g))for(e=a.a,g=e.length;g--;)e[g].jc();else um.push(g,this.tileSize);return a};Jn.prototype.createTileInternal=Jn.prototype.P;Jn.prototype.J=function(){this.C.J();this.O.removeEventListener(\"versionupdate\",this.I);N.prototype.J.call(this)};\nJn.prototype.I=function(){var a=this.O;this.f=a.aa().clone().T(this.tileType+\"/\"+a.Bb()+\"/\"+this.scheme).$(this.da).$(this.b);this.l(!1)};Jn.prototype.da={metadata:\"metaonly\",mgen:\"2\"};function Kn(a){a=gm(hm.maptile,a||{});I.call(this);this.f=a.baseUrl;this.c=a.path;this.i=a.subDomain;this.g=a.shards;this.ra=(this.u=!!a.ignoreTypes)?null:a.type;this.b=a.version;this.m=new km}v(Kn,I);r(\"H.service.metaInfo.Service\",Kn);function Ln(a,b){for(var c={},d=a[b+\"s\"][b],e=d.length;e--;)c[d[e].id]=d[e];a[b+\"s\"]=c}Kn.prototype.Y=function(a,b,c,d,e){this.a=(this.f||e).clone();this.i&&this.a.xa(this.i);this.ra&&this.a.xa(this.ra);this.c&&this.a.kc(this.c);\"newest\"===this.b&&Mn(this);return this};\nKn.prototype.configure=Kn.prototype.Y;Kn.prototype.aa=function(){return this.a};Kn.prototype.Bb=function(){return this.b};Kn.prototype.getVersion=Kn.prototype.Bb;Kn.prototype.Ga=function(){return this.m};Kn.prototype.getCopyrights=Kn.prototype.Ga;\nfunction Mn(a){var b=a.aa().clone().T(\"info\").$({output:\"json\"});a.g&&b.xa(a.g[0]);dm({url:b,vd:\"callback_func\",mc:function(b){b=JSON.parse(b.replace(/,\\s?\\]/g,\"]\")).response;var d;Ln(b,\"map\");Ln(b,\"scheme\");Ln(b,\"tiletype\");Ln(b,\"format\");Ln(b,\"resolution\");Ln(b,\"language\");if(\"newest\"===a.b&&\"traffic\"!==a.ra)for(d in b.maps)b.maps[d].hash&&b.maps[d].newest&&(a.b=b.maps[d].hash,a.dispatchEvent(\"versionupdate\"));a.j=b;a.dispatchEvent(\"infoupdate\")},Yc:function(a){throw Error(\"[\"+a+\"]: Could not fetch meta-info from map tile service @\"+\nb.toString());},kf:!0})}Kn.prototype.s=function(){return this.j};Kn.prototype.getInfo=Kn.prototype.s;Kn.prototype.o=function(a,b,c,d,e,f){return new Jn(this,d,{tileSize:a,pixelRatio:b,categoryFilter:c,tileType:e,scheme:f})};Kn.prototype.createTileProvider=Kn.prototype.o;Kn.prototype.l=function(a,b,c,d,e,f){a=this.o(a,b,c,d,e,f);return new nh(a)};Kn.prototype.createTileLayer=Kn.prototype.l;\nT.prototype.l=function(a){var b;b=gm(hm.metainfotile,a||{});var c;c=\"\"+(b.ignoreTypes?\"\":b.type);c+=b.path;c+=b.subDomain;c+=b.baseUrl;c+=b.shards?b.shards.join(\"\"):\"\";b=mm(c);c=this.a[\"meta\"+b];c||(c=this.Y(new Kn(a)),this.a[\"meta\"+b]=c);return c};T.prototype.getMetaInfoService=T.prototype.l;hm.metainfotile={type:\"base\",version:\"newest\",subDomain:\"maps\",path:\"maptile/2.1\",shards:[\"1\",\"2\",\"3\",\"4\"]};T.prototype.D=function(a,b,c,d,e,f){var g=this.b(),h=this.b({type:\"aerial\"}),k=this.b({type:\"traffic\"}),l=this.b({type:\"pano\"}),m=this.l(),n=this.o(),q=this.m(),u={},t={crossOrigin:\"anonymous\"},y;\"object\"===typeof a&&(f=a,t.crossOrigin=\"crossOrigin\"in f?f.crossOrigin:\"anonymous\",a=f.tileSize,b=f.ppi,c=f.lg,d=f.lg2,e=f.style,f=f.pois);a=a||256;y=320===b?2:1;320===b&&(u.ppi=b);c&&(u.lg=c);d&&(u.lg2=d);e&&(u.style=e);f&&(u.pois=f);b=new yn(n,void 0,c?u:null);this.O=new th(b);return{normal:{xbase:g.b(\"xbasetile\",\n\"normal.day\",a,\"png8\",u,1,!1,t),xbasenight:g.b(\"xbasetile\",\"normal.night\",a,\"png8\",u,1,!1,t),base:g.b(\"basetile\",\"normal.day\",a,\"png8\",u,1,!1,t),basenight:g.b(\"basetile\",\"normal.night\",a,\"png8\",u,1,!1,t),map:g.b(\"maptile\",\"normal.day\",a,\"png8\",u,1,!1,t),mapnight:g.b(\"maptile\",\"normal.night\",a,\"png8\",u,1,!1,t),traffic:k.b(\"traffictile\",\"normal.day\",a,\"png8\",u,1,!1,t),trafficnight:k.b(\"traffictile\",\"normal.night\",a,\"png8\",u,1,!1,t),transit:g.b(\"maptile\",\"normal.day.transit\",a,\"png8\",u,1,!1,t),panorama:l.b(\"rctile\",\n\"normal.day\",a,\"png8\",u,1,!1,t),panoramanight:l.b(\"rctile\",\"normal.night\",a,\"png8\",u,1,!1,t),labels:g.b(\"labeltile\",\"normal.day\",a,\"png\",u,1,!1,t),metaInfo:m.l(a,y,[\"buildings\"],u)},satellite:{xbase:h.b(\"xbasetile\",\"hybrid.day\",a,\"jpg\",u,1,!0,t),base:h.b(\"basetile\",\"hybrid.day\",a,\"jpg\",u,1,!0,t),map:h.b(\"maptile\",\"hybrid.day\",a,\"jpg\",u,1,!0,t),traffic:k.b(\"traffictile\",\"hybrid.day\",a,\"jpg\",u,1,!0,t),panorama:l.b(\"rctile\",\"hybrid.day\",a,\"jpg\",u,1,!0,t),labels:h.b(\"labeltile\",\"hybrid.day\",a,\"png\",u,\n1,!0,t)},terrain:{xbase:h.b(\"xbasetile\",\"terrain.day\",a,\"jpg\",u,1,!1,t),base:h.b(\"basetile\",\"terrain.day\",a,\"jpg\",u,1,!1,t),map:h.b(\"maptile\",\"terrain.day\",a,\"jpg\",u,1,!1,t),traffic:k.b(\"traffictile\",\"terrain.day\",a,\"jpg\",u,1,!1,t),panorama:l.b(\"rctile\",\"terrain.day\",a,\"jpg\",u,1,!1,t),labels:h.b(\"labeltile\",\"terrain.day\",a,\"png\",u,1,!1,t)},incidents:this.O,venues:q.i({tileSize:a,pixelRatio:y})}};T.prototype.createDefaultLayers=T.prototype.D;function Nn(a){a=gm(hm.routing,a);a.callbackKey=\"jsoncallback\";Nn.v.constructor.call(this,a)}v(Nn,em);r(\"H.service.RoutingService\",Nn);Nn.prototype.Y=function(a,b,c,d,e){Nn.v.Y.apply(this,[a,b,c,d,e]);this.f&&(this.a=this.f.clone());return this};Nn.prototype.configure=Nn.prototype.Y;Nn.prototype.g=function(a,b,c){a=this.aa().clone().T(\"calculateroute.json\").$(a);fm(this,a,b,c)};Nn.prototype.calculateRoute=Nn.prototype.g;\nNn.prototype.b=function(a,b,c){a=this.aa().clone().xa(\"isoline\").T(\"calculateisoline.json\").$(a);fm(this,a,b,c)};Nn.prototype.calculateIsoline=Nn.prototype.b;hm.routing={subDomain:\"route\",path:\"routing/7.2\"};T.prototype.S=function(a){return this.Y(new Nn(a))};T.prototype.getRoutingService=T.prototype.S;function On(a){a=gm(hm.geocoding,a);a.callbackKey=\"jsoncallback\";On.v.constructor.call(this,a);this.b=a.reverseSubDomain}v(On,em);r(\"H.service.GeocodingService\",On);On.prototype.Y=function(a,b,c,d,e){On.v.Y.apply(this,[a,b,c,d,e]);this.f&&(this.a=this.f.clone());return this};On.prototype.configure=On.prototype.Y;On.prototype.g=function(a,b,c){a=this.aa().clone().T(\"geocode.json\").$(a);return fm(this,a,b,c)};On.prototype.geocode=On.prototype.g;\nOn.prototype.j=function(a,b,c){a=this.aa().clone().T(\"reversegeocode.json\").$(a);this.b&&a.xa(this.b);return fm(this,a,b,c)};On.prototype.reverseGeocode=On.prototype.j;On.prototype.i=function(a,b,c){a=this.aa().clone().T(\"search.json\").$(a);return fm(this,a,b,c)};On.prototype.search=On.prototype.i;hm.geocoding={subDomain:\"geocoder\",path:\"6.2\",reverseSubDomain:\"reverse\"};T.prototype.bb=function(a){return this.Y(new On(a))};T.prototype.getGeocodingService=T.prototype.bb;function Pn(a){a=gm(hm.places,a);a.callbackKey=\"callback\";Pn.v.constructor.call(this,a)}v(Pn,em);r(\"H.service.PlacesService\",Pn);Pn.EntryPoint={SEARCH:\"discover/search\",SUGGEST:\"suggest\",EXPLORE:\"discover/explore\",AROUND:\"discover/around\",HERE:\"discover/here\",CATEGORIES:\"categories/places\"};Pn.prototype.b=function(a,b,c,d){b=b||{};a=this.aa().clone().T(a).$(b);return fm(this,a,c,d)};Pn.prototype.request=Pn.prototype.b;Pn.prototype.m=function(a,b,c){return this.b(\"discover/search\",a,b,c)};\nPn.prototype.search=Pn.prototype.m;Pn.prototype.u=function(a,b,c){return this.b(\"suggest\",a,b,c)};Pn.prototype.suggest=Pn.prototype.u;Pn.prototype.j=function(a,b,c){return this.b(\"discover/explore\",a,b,c)};Pn.prototype.explore=Pn.prototype.j;Pn.prototype.g=function(a,b,c){return this.b(\"discover/around\",a,b,c)};Pn.prototype.around=Pn.prototype.g;Pn.prototype.l=function(a,b,c){return this.b(\"discover/here\",a,b,c)};Pn.prototype.here=Pn.prototype.l;\nPn.prototype.i=function(a,b,c){return this.b(\"categories/places\",a,b,c)};Pn.prototype.categories=Pn.prototype.i;Pn.prototype.o=function(a,b,c,d){a=$l(a);d&&a.$(d);return fm(this,a,b,c)};Pn.prototype.follow=Pn.prototype.o;hm.places={subDomain:\"places\",path:\"places/v1\"};T.prototype.P=function(){return this.Y(new Pn)};T.prototype.getPlacesService=T.prototype.P;function Qn(a){a=gm(hm.enterpriseRouting,a);a.callbackKey=\"jsoncallback\";if(!B(a.baseUrl,S))throw new C(Qn,0,\"Invalid base url\");this.i=a;Qn.v.constructor.call(this,a)}v(Qn,em);r(\"H.service.EnterpriseRoutingService\",Qn);Qn.prototype.l=function(a,b,c){a=this.aa().clone().T(\"calculateroute.json\").$(a);fm(this,a,b,c)};Qn.prototype.calculateRoute=Qn.prototype.l;Qn.prototype.g=function(a,b,c){a=this.aa().clone().T(\"getroute.json\").$(a);fm(this,a,b,c)};Qn.prototype.getRoute=Qn.prototype.g;\nQn.prototype.b=function(a,b,c){a=this.aa().clone().T(\"getlinkinfo.json\").$(a);fm(this,a,b,c)};Qn.prototype.getLinkInfo=Qn.prototype.b;Qn.prototype.j=function(a,b,c){a=this.aa().clone().T(\"calculateisoline.json\").$(a);fm(this,a,b,c)};Qn.prototype.calculateIsoline=Qn.prototype.j;Qn.prototype.Y=function(a,b,c,d,e){var f,g=hm.enterpriseRouting;this.i.baseUrl===g.baseUrl&&e&&(f=e.clone(),f.md(g.host||g.baseUrl.sc),d&&f.xa(g.citSubDomain));return em.prototype.Y.apply(this,[a,b,c,d,f])};\nQn.prototype.configure=Qn.prototype.Y;var Rn={subDomain:\"route\",path:\"routing/6.2\",baseUrl:new S(\"http\",\"nlp.nokia.com\"),host:\"nlp.nokia.com\",citSubDomain:\"st\"};hm.enterpriseRouting=Rn;T.prototype.K=function(a){return this.Y(new Qn(a))};T.prototype.getEnterpriseRoutingService=T.prototype.K;function Sn(a){a=gm(hm.gfe,a);Sn.v.constructor.call(this,a)}v(Sn,em);r(\"H.service.extension.geofencing.Service\",Sn);hm.gfe={subDomain:\"gfe\",path:\"2\"};T.prototype.I=function(a){return this.Y(new Sn(a))};T.prototype.getGeofencingService=T.prototype.I;\nSn.prototype.b=function(a,b,c,d){var e;if(!a)throw new C(this.b,0,a);if(!sa(c))throw new TypeError(\"onResult must be a function\");if(!sa(d))throw new TypeError(\"onError must be a function\");e=function(a){d(new w.Error(a))};a=this.aa().clone().T(a+\".json\").$(b);a=new Fh(\"application/json\",a.toString());a.then(c,function(a){\"error\"===a.type?e(a.statusText||\"Unable to load data\"):a.json().then(function(a){e(a.error_description||a.issues[0].message)},e)});return a};Sn.prototype.request=Sn.prototype.b;\nSn.EntryPoint={SEARCH_PROXIMITY:\"search/proximity\"};function Tn(a){if(a===A)a=\"\\t\";else if(!/^[^\"\\r\\n]$/.test(a))throw new C(Tn,0);this.b=String(a).charCodeAt(0);this.Pe=z(this.Pe,this);this.G=Un}var Un=0;p=Tn.prototype;p.getState=function(){return this.G};function Vn(a,b,c){var d=a.G;if(d!==b)throw 1===d&&(a.G=Un),new jc(c,\"Requires state: \"+[\"READY\",\"PARSE\",\"PAUSE\"][b]+\" but found \"+[\"READY\",\"PARSE\",\"PAUSE\"][d]);}p.Pe=function(a){this.G=Un;throw new C(Tn.prototype.parse,0,\"Malformed DSV at row \"+this.a.o+\" column \"+this.a.c+\": \"+a);};\nfunction Wn(a,b){var c=[];a.parse(b,function(a,b,f){1>a&&(c[b]=f);return 0<a});a.G=Un;return c}p.parse=function(a,b,c){Vn(this,Un,Tn.prototype.parse);a=a.trim();this.a=new Xn(a,this.b,this.Pe);this.c=b;this.ug=c||Be;this.G=2;this.pf()};p.ug=Be;\np.pf=function(){var a=this.a,b,c,d=[],e,f,g;Vn(this,2,Tn.prototype.pf);this.G=1;do{if(!a.B){this.G=Un;break}if(c>a.c){if(void 0!==f&&f!==c){this.a.b(\"The number of columns must be the same for all rows\");return}f=c}b=a.o;c=a.c;e=a.g;g=this.ug(b,c,a);if(a.g>e)for(;-1!==a.next(););else{for(;-1!==(e=a.next());)d.push(e);g=String.fromCharCode.apply(x,d);d.length=0}Yn(a);this.c(b,c,g)&&(this.G=2)}while(1===this.G);2!=this.G&&void 0!==f&&0<c&&f!==c&&this.a.b(\"The number of columns must be the same for all rows\")};\nfunction Xn(a,b,c){this.f=new Og(a);this.u=b;this.B=!0;this.g=this.o=this.c=0;Yn(this);this.b=c;this.i=[];this.l=!1}Xn.prototype.g=0;var Zn={je:10,Gf:13,le:34,Lc:-1};function Yn(a){var b=a.f.a();a.s=!1;(a.A=34===b)&&a.f.next()}function $n(a,b){var c=a.f;a.s=!0;switch(b){case a.u:a.c++;break;case Zn.Gf:c.next(),c.a()!==Zn.je&&a.b(\"CR without LF\");case Zn.je:a.c=0;a.o++;break;case Zn.Lc:a.B=!1;break;default:a.b(\"End of field expected\")}c.next();return Zn.Lc}\nXn.prototype.a=function(){var a,b;if(this.s)b=Zn.Lc;else if(a=this.f,b=a.a(),this.A)switch(b){case Zn.le:a.next();b=a.a();b!==Zn.le&&(b=$n(this,b));break;case Zn.Lc:this.b(\"Closing quotation mark expected\")}else switch(b){case Zn.le:this.b(\"Unexpected quotation mark\");case this.u:case Zn.Gf:case Zn.je:case Zn.Lc:b=$n(this,b)}return b};Xn.prototype.m=function(){this.l=!0;this.i=[]};Xn.prototype.j=function(){var a=this.i.slice();this.l=!1;this.i=[];return a};\nXn.prototype.next=function(){var a=this.a();-1!==a&&this.f.next();this.l&&this.i.push(a);this.g++;return a};function ao(){}r(\"H.service.extension.dataView.ITable\",ao);ao.prototype.getMeta=ao.prototype.bd;ao.prototype.getRowCount=ao.prototype.g;ao.prototype.getRow=ao.prototype.cc;ao.prototype.getColumnNames=ao.prototype.c;ao.prototype.getColumn=ao.prototype.j;ao.prototype.getCell=ao.prototype.f;ao.prototype.concat=ao.prototype.concat;function bo(){}r(\"H.service.extension.dataView.IColumn\",bo);bo.prototype.getCell=bo.prototype.a;function co(){}r(\"H.service.extension.dataView.IRow\",co);co.prototype.getColumnNames=co.prototype.b;co.prototype.getCell=co.prototype.a;r(\"H.service.extension.customLocation.Permission\",{READ:\"read\",WRITE:\"write\",EXPORT:\"export\"});r(\"H.service.extension.customLocation.Storage\",{READONLY:\"readonly\",UPDATABLE:\"updatable\"});function eo(a){this.a=a}eo.prototype.cancel=function(){for(var a=this.a,b=a.length;b--;)a[b].cancel();a.length=0};function fo(){if(go)throw new jc(fo);}r(\"H.service.extension.customLocation.Table\",fo);var go=!0;function ho(a,b){var c,d,e,f;go=!1;c=new fo;go=!0;c.l=Oa(w.JSON.parse(w.JSON.stringify(a)));d=a.columnNames;e=Ka();for(f=d.length;f--;)e[d[f]]=f;c.o=e;c.b=d.length;if(e=b){if(e.length%d.length)throw new C(ho,1,\"Invalid number of cells\");}else e=[];c.a=e;return c}fo.prototype.bd=function(){return this.l};fo.prototype.getMeta=fo.prototype.bd;fo.prototype.g=function(){return this.a.length/this.b};\nfo.prototype.getRowCount=fo.prototype.g;fo.prototype.cc=function(a){return a<this.a.length/this.b?new io(this,a):A};fo.prototype.getRow=fo.prototype.cc;fo.prototype.s=function(){var a=this.a.length/this.b,b,c=new w.Array(a);for(b=0;b<a;b++)c[b]=new io(this,b);return c};fo.prototype.getRows=fo.prototype.s;fo.prototype.ne=function(a){var b=this.b,c=this.a,d=c.length/this.b;if(!a||a.length%b)throw new C(this.ne,0,\"Invalid number of cells\");this.a=c.concat(a);return d};fo.prototype.addCells=fo.prototype.ne;\nfo.prototype.u=function(){for(var a=this.b,b=this.a,c=this.a.length/this.b;a--;)b.push(x);return this.cc(c)};fo.prototype.addRow=fo.prototype.u;fo.prototype.c=function(){return this.l.columnNames};fo.prototype.getColumnNames=fo.prototype.c;fo.prototype.j=function(a){return this.o[a]===A?A:new jo(this,a)};fo.prototype.getColumn=fo.prototype.j;fo.prototype.f=function(a,b){return this.a[a*this.b+this.o[b]]};fo.prototype.getCell=fo.prototype.f;\nfo.prototype.i=function(a,b,c){b=this.o[b];if(a>=this.a.length/this.b)throw new C(this.i,0,\"Row index out of bounds\");if(b===A)throw new C(this.i,0,\"Column unknown\");this.a[a*this.b+b]=c};fo.prototype.setCell=fo.prototype.i;\nfo.prototype.concat=function(){var a=arguments.length,b,c=\"\"+this.c(),d=this.a?this.a.slice():[],e;for(b=0;b<a;b++){e=arguments[b];if(!(e instanceof fo))throw new C(this.concat,b);if(\"\"+e.c()!==c)throw new C(this.concat,b,\"Incompatible columns!\");e.a&&(d=d.concat(e.a))}return ho(this.l,d)};fo.prototype.concat=fo.prototype.concat;var ko=/(\\n|\\t|\\r|\")/;\nfo.prototype.m=function(a,b){var c,d=this.b,e=this.c(),f=[],g,h=[],k=this.a,l=-1,m;for(c=0;c<d;c++)if(!a||a.test(e[c]))\"WKT\"===e[c]&&(l=f.length),f.push(c);if(!(g=f.length))throw new C(this.m,1,\"No columns filtered\");lo(this,h,e,0,d,f,g,l);if(b)for(m=b.length,c=0;c<m;c++)h.push(\"\\n\"),e=b[c],lo(this,h,k,e,d,f,g,l);else for(m=this.g(),e=0;e<m;e++)h.push(\"\\n\"),lo(this,h,k,e,d,f,g,l);return h.join(\"\")};\nfunction lo(a,b,c,d,e,f,g,h){var k,l;for(k=0;k<g;k++)if(k&&b.push(\"\\t\"),l=c[d*e+f[k]],k!==h){if(l!==x){l=String(l);if(ko.test(l))throw new C(a.m,0,'Invalid character (\\\\n, \\\\r, \\\\t, or \") in row '+d+\" column \"+a.l.columnNames[f[k]]);b.push(l)}}else b.push(l)}function jo(a,b){this.c=a;this.b=b}fo.Column=jo;jo.prototype.a=function(a){return this.c.f(a,this.b)};jo.prototype.getCell=jo.prototype.a;jo.prototype.f=function(a,b){this.c.i(a,this.b,b)};jo.prototype.setCell=jo.prototype.f;\nfunction io(a,b){this.fd=a;this.Oe=b}fo.Row=io;io.prototype.b=function(){return this.fd.c()};io.prototype.getColumnNames=io.prototype.b;io.prototype.a=function(a){return this.fd.f(this.Oe,a)};io.prototype.getCell=io.prototype.a;io.prototype.c=function(a,b){this.fd.i(this.Oe,a,b)};io.prototype.setCell=io.prototype.c;function mo(a){var b=no;if(!a||!ra(a.layerId)||a.rowFilter!==A&&!sa(a.rowFilter)||a.rowFilterContext!==A&&!Pa(a.rowFilterContext))throw new C(b,1,\"invalid layer config\"!==A?\"invalid layer config\":a);}function oo(a){return ra(a)&&/^[A-Z][A-Z0-9_]*$/.test(a)}function qo(a){for(var b=a&&a.length,c=2<=b&&\"WKT\"===a[--b]&&\"GEOMETRY_ID\"===a[--b];c&&b--;)c=oo(a[b]);return c}\nfunction ro(a,b){var c=\"\",d,e,f,g,h,k=[];if(!b){g={};k=[];if(a.geometries)for(e=0;e<a.geometries.length;e++)f=a.geometries[e],g[f.layerId]||(g[f.layerId]=[]),g[f.layerId].push(f);for(d in g)k.push({layerId:d,geometries:g[d]});for(d=0;d<k.length;d++)c+=ro(k[d],k[d].layerId)}else if(a.geometries&&a.geometries.length)for(h=Object.keys(a.geometries[0].attributes),c=c+(\"Meta:\\t\"+b+\"\\n\")+h.join(\"\\t\"),c+=\"\\tWKT\\n\",d=0;d<a.geometries.length;d++){g=a.geometries[d].attributes;f=a.geometries[d].geometry;for(e=\n0;e<h.length;e++)k.push(g[h[e]]);c+=k.join(\"\\t\");c+=\"\\t\"+f+\"\\n\";k=[]}return c};function so(a,b,c,d){d=d||{};if(!b)throw new C(so,1,\"has to be a function\");if(!c)throw new C(so,2,\"has to be a function\");this.c=b;this.i=c;this.a=[];this.g=d.duration||to;this.b=z(this.b,this);this.f={};var e;a=a.split(\"Meta:\\t\").slice(1);for(b=0;b<a.length;b++)d=a[b].split(\"\\n\"),c=d[0].split(\"\\t\")[0],d=d.slice(1).join(\"\\n\"),this.qc[c]=new Tn,this.Fe[c]=Wn(this.qc[c],d),e={layerId:c,columnNames:this.Fe[c]},this.Ie.push(c),this.f[c]=ho(e),this.Jb[c]=mj(),uo(this,d,c),this.b(c)}var to=100;p=so.prototype;\np.Fe={};p.Ie=[];p.qc={};p.Jb={};p.Ne={};function uo(a,b,c){var d=[],e=a.Fe[c].length-1,f=a.f[c];try{a.qc[c].parse(b,function(b,g,l){var m=!1;0<b&&(d[g]=l,g===e&&(a.a.push(f.cc(f.ne(d))),mj()-a.Jb[c]>a.g&&(m=!0)));return m},function(a,b,c){if(0<a&&b===e)return tg(c)})}catch(g){a.i(g)}}p.cancel=function(){for(var a in this.Ne)w.clearTimeout(this.Ne[a])};r(\"H.service.extension.customLocation.AsyncParser.prototype.cancel\",so.prototype.cancel);\nso.prototype.b=function(a){var b=this,c;this.Ne[a]=w.setTimeout(function(){if(2===b.qc[a].getState())b.Jb[a]=mj(),b.c(b.a,!1),b.a=[],b.qc[a].pf(),b.b(a);else{c=!0;for(var d=0;d<b.Ie.length;d++)if(b.qc[b.Ie[d]].getState()!==Un){c=!1;break}c&&(0<b.a.length&&b.c(b.a,!0),b.a=[])}},0)};function V(a){a=gm(hm.cle,a);V.v.constructor.call(this,a)}v(V,em);r(\"H.service.extension.customLocation.Service\",V);V.prototype.Y=function(a,b,c,d,e){V.v.Y.apply(this,[a,b,c,d,e]);this.f&&(this.a=this.f.clone());return this};V.prototype.configure=V.prototype.Y;V.prototype.K=function(a,b){var c=b&&b.resultType,d=new no(this,a,b),e,f=vo;c==f.MARKER||c===f.DOM_MARKER?e=new th(d):e=new nh(d);return e};V.prototype.createTileLayer=V.prototype.K;T.prototype.N=function(a){return this.Y(new V(a))};\nT.prototype.getCustomLocationService=T.prototype.N;function wo(a,b,c,d){var e;a=a===xo?\"changes\":\"file\";var f=b[a],g=ra(f),h=!g&&B(f,Blob);if(!g&&!h)throw new C(d,0,\"Invalid \"+a+\" parameter\");if(yo)h?e=f:e=Je(f,\"text/plain\"),d=new w.FormData,d.append(a,e,e.name||a+\".wkt\"),c.method=\"POST\",c.data=d,delete b[a];else if(h)throw new C(d,0,\"Sending Blob data is not supported by the browser\");}var yo=w.FormData&&!!w.FormData.prototype.append;\nV.prototype.b=function(a,b,c,d,e){function f(a){e(new w.Error(a))}var g=\"text/plain\",h=zo,k=a===h.LAYERS_UPLOAD||a===h.LAYERS_MODIFY||a===h.LAYERS_IMPORT,l=c,h={data:A,method:\"GET\"};if(!a)throw new C(this.b,0,a);if(!b)throw new C(this.b,1,b);Ao(this.b,3,d,e);k&&(B(c,Object,this.b,2,\"Invalid request parameters\"),l=Qa(c),wo(a,l,h,this.b));a=this.aa().clone().T(a+\".\"+b).$(l);b===Bo.JSON&&(g=\"application/json\");b=new Fh(g,a.toString(),td,h);b.then(function(a){var b=a.issues;b&&a.error_id&&a.response_code?\nf(b[0].message):d(a)},function(a){\"error\"===a.type||404===a.status?f(a.statusText||\"Unable to load data\"):a.json().then(function(a){f(a.error_description||a.issues[0].message)},f)});return b};V.prototype.request=V.prototype.b;\nvar xo=\"layers/modify\",zo={LAYERS_DELETE:\"layers/delete\",LAYERS_GRANT:\"layers/access/grant\",LAYERS_LIST:\"layers/list\",LAYERS_MODIFY:xo,LAYERS_UPLOAD:\"layers/upload\",LAYERS_IMPORT:\"layers/import\",SEARCH_ALL:\"search/all\",SEARCH_BBOX:\"search/bbox\",SEARCH_CORRIDOR:\"search/corridor\",SEARCH_PROXIMITY:\"search/proximity\",SEARCH_QUADKEY:\"search/quadkey\",SEARCH_TILE:\"tiled/tile\"};V.EntryPoint=zo;V.EntryPointType={TXT:\"txt\",JSON:\"json\"};hm.cle={subDomain:\"cle\",path:\"2\"};\nV.prototype.j=function(a,b,c){var d=this;return this.b(\"search/all\",\"txt\",{filter:'WKT==\"\"',layer_id:a},function(e){var f=e.replace(/[\\r\\n]+$/g,\"\").split(\"\\t\");d.b(\"layers/list\",\"json\",{layer_id:a,detail_level:\"all\"},function(a){a=a.layers[0];a.columnNames=f;b(ho(a))},c)},c)};V.prototype.getLayer=V.prototype.j;\nV.prototype.A=function(a,b,c,d){function e(){return++g<f?h.b(\"layers/access/grant\",\"json\",{layer_id:a,granted_app_id:b[g].grantedAppId,permissions:b[g].permissions.join(\",\")},e,d):h.j(a,c,d)}var f=b&&b.length,g=-1,h=this;return e()};V.prototype.grantAccess=V.prototype.A;V.prototype.s=function(a,b,c){return this.b(\"layers/delete\",\"json\",{layer_ids:a},b,c)};V.prototype.deleteLayer=V.prototype.s;\nV.prototype.u=function(a,b,c){function d(){setTimeout(function(){l.j(h,function(a){setTimeout(e.bind(null,a),n)},function(){64E3>m?(m+=n,d()):c(w.Error(\"Timeout\"))})},n);n*=2}function e(d){var e=JSON.stringify(d.c()),f=a.grants,g;e!==JSON.stringify(k)?(g=\"Results into different column names on the backend: \"+e,setTimeout(function(){l.s(h,function(){c(w.Error(g))},function(a){c(w.Error(g+\". \"+a.message))})},n)):f&&f.length?l.A(h,f,b,c):b(d)}var f,g,h,k,l=this,m=0,n=1E3;g=!a||!oo(h=a.layerId)&&(f=\"layerId\")||\n!qo(k=a.columnNames)&&(f=\"columnNames\")?0:sa(b)?sa(c)?-1:2:1;if(0<=g)throw new C(l.u,g,f||arguments[g]);return l.j(h,function(){c(w.Error(\"Layer exists already\"))},function(){var b={layer_id:h,file:k.join(\"\\t\")},e=a.level,f=a.storage;e!==A&&(b.level=e);f!==A&&(b.storage=f);l.b(\"layers/upload\",\"json\",b,d,c)})};V.prototype.createLayer=V.prototype.u;\nV.prototype.i=function(a,b,c,d,e,f){var g,h=[];if(!Ya(a))throw new C(this.i,0,\"has invalid type\");B(b,fc,this.i,1,\"has invalid type\");if(!$a(c))throw new C(this.i,2,\"has invalid type\");Ao(this.i,3,d,e);a={layer_ids:a.join(\",\"),proximity:b.lat+\",\"+b.lng+\",\"+c};f&&Ca(a,f);f=this.b(\"search/proximity\",\"json\",a,function(a){a.geometries.length?(a=ro(a),g=new so(a,d,e),h.push(g)):d(Ce,!0)},e);h.push(f);return new eo(h)};V.prototype.searchByProximity=V.prototype.i;\nV.prototype.g=function(a,b,c,d,e,f){var g,h,k=\"\",l=[];if(!Ya(a))throw new C(this.g,0,\"has invalid type\");if(!ra(b)&&!B(b,F))throw new C(this.g,1,\"has invalid type\");if(!$a(c))throw new C(this.g,2,\"has invalid type\");Ao(this.g,3,d,e);a={layer_ids:a.join(\",\"),radius:c};if(ra(b))a.route_id=b;else{h=b.pa;b=0;for(c=h.length;b<c;b+=3)k+=h[b]+\",\"+h[b+1],b<c-3&&(k+=\",\");a.corridor=k}f&&Ca(a,f);f=this.b(\"search/corridor\",\"json\",a,function(a){a.geometries.length?(a=ro(a),g=new so(a,d,e),l.push(g)):d(Ce,!0)},\ne);l.push(f);return new eo(l)};V.prototype.searchByCorridor=V.prototype.g;V.prototype.l=function(a,b,c,d,e){function f(a,b){b&&m--;c(a,!m)}function g(a,b){a.layer_id=b;return n.b(\"search/bbox\",\"json\",a,function(a){(a=ro(a,b))?(h=new so(a,f,d),k.push(h)):f(Ce,!0)},d)}var h,k=[],l,m,n=this;if(!Ya(a))throw new C(this.l,0,\"has invalid type\");B(b,G,this.l,1,\"has invalid type\");Ao(this.l,2,c,d);b={bbox:b.ma+\",\"+b.fa+\";\"+b.ka+\",\"+b.ia};e&&Ca(b,e);l=0;for(m=a.length;l<m;l++)e=g(b,a[l]),k.push(e);return new eo(k)};\nV.prototype.searchByBoundingBox=V.prototype.l;V.prototype.o=function(a,b,c,d){var e,f,g=[];if(!ra(a))throw new C(this.o,0,\"has invalid type\");Ao(this.o,1,b,c);e={layer_id:a};d&&Ca(e,d);d=this.b(\"search/all\",\"json\",e,function(d){d.geometries.length?(d=ro(d,a),f=new so(d,b,c),g.push(f)):b(Ce,!0)},c);g.push(d);return new eo(g)};V.prototype.searchAll=V.prototype.o;var Co={\"delete\":/^GEOMETRY_ID$/,append:/^(?!GEOMETRY_ID$)/,update:null};\nfunction Do(a,b,c,d,e,f){function g(){da++;d(this,da===J)}function h(a){da++;e(a,this,da===J)}var k=\"append\"!==b,l,m,n,q,u,t={},y=Ka(),J=0,U=[],da=0;if(!Ya(c))throw new C(f,0,c);Ao(f,1,d,e);for(l=c.length;l--;){m=c[l];if(B(m,io))if(n=m.fd.bd().layerId,q=m.a(\"GEOMETRY_ID\"),k){if(q===x||\"\"===String(q))u='GEOMETRY_ID must not be null or \"\"';t[q=n+\"_\"+q]&&(u=\"same GEOMETRY_ID for multiple rows\");t[q]=m}else q!==x&&\"\"!==String(q)&&(u='GEOMETRY_ID must be null or \"\"');else u=\"Invalid type\";if(u)throw new C(f,\n0,\"- Invalid row at index \"+l+\", \"+u);q=y[n];q||(q=y[n]=[],J++);q.push(m)}for(n in y){q=y[n];c=[];for(l=q.length;l--;)c.push(q[l].Oe);U.push(a.b(xo,\"json\",{layer_id:n,action:b,changes:q[0].fd.m(Co[b],c)},z(g,q),z(h,q)))}return new eo(U)}V.prototype.m=function(a,b,c){return Do(this,\"append\",a,b,c,this.m)};V.prototype.appendRows=V.prototype.m;V.prototype.C=function(a,b,c){return Do(this,\"update\",a,b,c,this.C)};V.prototype.updateRows=V.prototype.C;\nV.prototype.B=function(a,b,c){return Do(this,\"delete\",a,b,c,this.B)};V.prototype.deleteRows=V.prototype.B;function Ao(a,b,c,d){if(!sa(c))throw new C(a,b,\"has invalid type\");if(!sa(d))throw new C(a,b+1,\"has invalid type\");};function Eo(a,b){this.c=a;this.f=b}r(\"H.service.extension.dataView.ObjRow\",Eo);Eo.prototype.b=function(){return this.c.c()};Eo.prototype.getColumnNames=Eo.prototype.b;Eo.prototype.a=function(a){return this.c.f(this.f,a)};Eo.prototype.getCell=Eo.prototype.a;function Fo(a,b){this.c=a;this.b=b}r(\"H.service.extension.dataView.ObjColumn\",Fo);Fo.prototype.a=function(a){return this.c.f(a,this.b)};Fo.prototype.getCell=Fo.prototype.a;function Go(a,b,c){var d;if(a&&a.length)for(this.Hb=a,this.oc=a=b||Object.keys(this.Hb[0]),this.te=b=Ka(),d=a.length;d--;)b[a[d]]=!0;c!==A&&(this.We=c)}r(\"H.service.extension.dataView.ObjTable\",Go);p=Go.prototype;p.We=A;p.Hb=A;p.oc=A;p.te=A;p.bd=function(){return this.We};Go.prototype.getMeta=Go.prototype.bd;Go.prototype.g=function(){return this.Hb?this.Hb.length:0};Go.prototype.getRowCount=Go.prototype.g;Go.prototype.cc=function(a){var b=this.Hb;return b&&b[a]?new Eo(this,a):A};\nGo.prototype.getRow=Go.prototype.cc;Go.prototype.c=function(){return this.oc||Ce};Go.prototype.getColumnNames=Go.prototype.c;Go.prototype.j=function(a){return this.te[a]?new Fo(this,a):A};Go.prototype.getColumn=Go.prototype.j;Go.prototype.f=function(a,b){var c=this.Hb;return(c=c&&this.te[b]&&c[a])&&c[b]};Go.prototype.getCell=Go.prototype.f;\nGo.prototype.concat=function(){var a=arguments.length,b,c=this.oc,d=\"\"+this.oc,e=(this.Hb||[]).slice(),f;for(b=0;b<a;b++){f=arguments[b];if(!(f instanceof Go))throw new C(this.concat,b);if(f.Hb){if(c&&\"\"+f.oc!==d)throw new C(this.concat,b,\"Incompatible columns!\");e=e.concat(f.Hb)}}return new Go(e,this.oc,this.We)};Go.prototype.concat=Go.prototype.concat;function Ho(a,b,c){var d=vo,e=a===d.POLYGON,f=a===d.POLYLINE;this.b=b;this.c=c||rc;(this.a=f||e)?this.j=e:this.g=a===d.MARKER;this.f=this.a?\"$HProjGeometry\":\"geometry\"}\nHo.prototype.parse=function(a,b,c){var d,e,f,g,h,k={},l=[],m,n,q,u;m=0;for(n=c.length;m<n;m++)if(d=c[m],q=d.Rows,d=q.length)for(e=Object.keys(q[0]).filter(function(a){return\"geometry\"!==a&&\"$HProjGeometry\"!==a}),e=new Go(q,e),u=0;u<d;u++)if(f=q[u],h=f[this.f]){if(delete f[this.f],f=e.cc(u))try{this.a?g=Io(this,a,b,f,h):g=Jo(this,a,f,h.path),g.ga(a),l.push(g)}catch(t){this.c(t.message)}}else this.c(\"Layer must contain geometries\");k[this.a?\"spatials\":this.g?\"markers\":\"domMarkers\"]=l;return k};\nfunction Io(a,b,c,d,e){var f=[],g=e.paths,h=g.length,k=0,l=a.b&&a.b(d);for(a=new Xm(b,a.j,A,{style:l||a.i,data:d});k!==h;)f.push(Ko(g[k++]));an(a,c,[new Rf(f,e.interiorsIndex,e.outlinesIndex)]);return a}function Jo(a,b,c,d){d=new fc(d[0],d[1]);var e=a.b&&a.b(c);a.g?(a={icon:e,data:c,provider:b},a=new ti(d,a)):(a={icon:e,data:c,provider:b},a=new eh(d,a));return a}function Ko(a){for(var b=0,c=a.length,d=[];b<c;)d.push(new M(a[b++],a[b++]));return d};function Lo(a){a=a||{};var b=a.tileCacheSize||1024,c=a.resultType,d=a.styleCallback,e=vo;a.min!==A||(a.min=12);Lo.v.constructor.call(this,a);if(-1===Mo.indexOf(c))throw new C(Lo,2,\"invalid resultType\");this.b=c;if(d&&!sa(d))throw new C(Lo,2,\"invalid style callback\");this.da=d;this.V=a.pixelRatio||1;this.f=z(this.f,this);this.N(new Ug(b,z(this.Qh,this)));this.createTileInternal=c===e.POLYLINE||c===e.POLYGON?z(this.zh,this):z(this.yh,this)}v(Lo,N);r(\"H.service.extension.TileProvider\",Lo);\nLo.prototype.I=!1;var No=ni.prototype.Oc.READY;Lo.prototype.o=function(a,b,c,d){return this.I?Lo.v.o.call(this,a,b,c,d):A};Lo.prototype.requestTile=Lo.prototype.o;Lo.prototype.f=function(a){a=ra(a)?a:a+\"\";this.dispatchEvent(new Cc(\"error\",a,this))};Lo.prototype.j=function(){return this.b===vo.MARKER};Lo.prototype.providesMarkers=Lo.prototype.j;Lo.prototype.i=function(){return this.b===vo.DOM_MARKER};Lo.prototype.providesDomMarkers=Lo.prototype.i;\nLo.prototype.s=function(){return this.b===vo.POLYLINE||this.b===vo.POLYGON};Lo.prototype.providesSpatials=Lo.prototype.s;function Oo(a){a.C||(a.O||(a.O=a.P(a.b,a.da,a.f)),a.C=new Fm(a.O),a.C.ga(a),a.C.addEventListener(a.D.ja,z(a.Ph,a)),a.C.P=!0);return a.C}p=Lo.prototype;\np.yh=function(a,b,c,d){var e=this.getTileKey(a,b,c),e=this.g.get(e),f=this.b==vo.DOM_MARKER,g=[],h=Oo(this);e?e.valid=!0:(a=e=new Zg(a,b,c,x),delete a.i,a.u=d);d=f?Jm(h,e,\"domMarkers\"):Jm(h,e,\"markers\");for(b=d.length;b--;)a=d[b],a.Af=e,(f||a.qb().getState()===No)&&g.push(a);e.data=g;return e};p.Ph=function(a){if(a=a.target.Af)a.valid=!1};\np.zh=function(a,b,c,d){var e=Oo(this),f,g=this.getTileKey(a,b,c),h=this.g.get(g);f=um.pop(this.tileSize);h||(a=h=new Nk(g,a,b,c,this.tileSize,this.V,c,e),delete a.i,a.u=d);h.ha(f)||um.push(f,this.tileSize);return h};p.Qh=function(a,b){var c,d;c=vo;if(this.b===c.POLYLINE||this.b===c.POLYGON){c=b.a;for(d=c.length;d--;)delete c[d].Gc[b.key];b.data&&(um.push(b.o(),this.tileSize),b.m())}else for(c=b.data,d=c.length;d--;)delete c[d].Af};p.F=function(){Lo.v.F.call(this);Oo(this).J()};\nvar vo={MARKER:0,DOM_MARKER:1,POLYLINE:2,POLYGON:3};Lo.ResultType=vo;var Mo=[vo.MARKER,vo.DOM_MARKER,vo.POLYLINE,vo.POLYGON];function no(a,b,c){var d=this,e=b&&b.rowFilter,f,g,h,k,l=vo;no.v.constructor.call(this,c);B(a,V,no,0);h=c.resultType;mo(b);e?(f=Qa(b),f.rowFilter=e.toString()):f=b;(new Kh).ld(\"cle\",\"H.service.extension.worker.processor\");k=b.layerId;a.b(\"layers/list\",\"json\",{detail_level:\"all\",layer_id:k},function(b){b=b.layers;var c;for(c=0;c<b.length;c++)if(b[c].layerId===k){f.level=b[c].level;break}g=a.aa().clone().T(\"tiled/tile.json\").$({meta:1});(new Mh(\"cle\",{message:[d.uid,0,{tileSize:d.tileSize,projected:!0,\nonlyOutline:h===l.POLYLINE,serverUrl:g.toString(),layerConfigs:[f],batchTiles:!1}]})).then(function(){d.I=!0;Qg(d)},d.f)},function(a){d.f(a.message)})}v(no,Lo);r(\"H.service.extension.customLocation.TileProvider\",no);no.prototype.P=function(a,b,c){return new Ho(a,b,c)};\nno.prototype.c=function(a,b,c,d,e){var f=this,g=this.getTileKey(a,b,c),h,g=this.g.get(g),k={cancel:rc},l=!0,m,n=vo;g&&(this.b===n.POLYLINE||this.b===n.POLYGON?g.vc()||(d(um.pop(this.tileSize),null),l=!1):(d(x),l=!1));l&&(m=nm.setTimeout(function(){h=new Mh(\"cle\",{message:[f.uid,1,[a,b,c]]});h.then(d,e)},500),k.cancel=function(){h?h.cancel():nm.clearTimeout(m)});return k};no.prototype.requestInternal=no.prototype.c;no.prototype.F=function(){no.v.F.call(this);new Mh(\"cle\",{message:[this.uid,3]})};function Po(a,b,c,d){if(!a||!ra(ve(a.layerId,a.layer))||!$a(a.level)||a.rowFilter!==A&&!sa(a.rowFilter)||a.rowFilterContext!==A&&!Pa(a.rowFilterContext))throw new C(b,c,d!==A?d:a);};function Qo(a,b,c){var d;B(a,Ro,Qo,0,\"has invalid type\");B(b,G,Qo,1,\"has invalid type\");if(!Ya(c))throw new C(Qo,2,\"has invalid type\");for(d=0;d<c.length;d++)Po(c[d],Qo,2,\"has invalid type\");Qo.v.constructor.call(this);this.a=b;this.b=c;(new Kh).ld(So,\"H.service.extension.worker.processor\");a=a.aa().clone().T(To+\".\"+Uo).$({meta:\"1\"});new Mh(So,{message:[Vo,0,{serverUrl:a.toString()}]})}v(Qo,I);r(\"H.service.extension.platformData.SearchRequest\",Qo);\nQo.prototype.send=function(){var a=So,b=Vo,c=[],d,e,f,g=this;for(f=0;f<this.b.length;f++)d=this.b[f],c.push({layerId:ve(d.layerId,d.layer),level:d.level,rowFilter:d.rowFilter!==A?d.rowFilter+\"\":A,rowFilterContext:d.rowFilterContext,columns:d.columns});e=[this.a.ma,this.a.fa,this.a.ka,this.a.ia,c];this.c=w.setTimeout(function(){(new Mh(a,{message:[b,2,e]})).then(z(Wo,g),z(Xo,g))},1)};Qo.prototype.send=Qo.prototype.send;Qo.prototype.cancel=function(){w.clearTimeout(this.c)};Qo.prototype.cancel=Qo.prototype.cancel;\nfunction Wo(a){var b,c;for(c=0;c<a.length;c++){b=a[c].Rows;for(var d=b.length,e=void 0;d--;)e=b[d],e.geometry&&(e.geometry=[e.geometry.path]);b=new Go(b,null,a[c].Meta);this.dispatchEvent(new Bc(\"data\",b))}this.dispatchEvent(new Ac(\"end\"))}function Xo(a){this.dispatchEvent(new Cc(\"error\",a))}var So=\"pde\",Vo=\"pdeSearchRequestProvider\";function Yo(a,b,c){var d=this,e=b&&b.rowFilter,f=c.resultType,g=vo;Yo.v.constructor.call(this,c);B(a,Ro,Yo,0);Po(b,Yo,1,\"invalid layer config\");e?(c=Qa(b),c.rowFilter=e.toString()):c=Qa(b);delete c.layer;c.layerId=ve(b.layerId,b.layer);(new Kh).ld(\"pde\",\"H.service.extension.worker.processor\");a=a.aa().clone().T(To+\".\"+Uo).$({meta:1});(new Mh(\"pde\",{message:[this.uid,0,{tileSize:this.tileSize,projected:!0,onlyOutline:f===g.POLYLINE,serverUrl:a.toString(),layerConfigs:[c]}]})).then(function(){d.I=\n!0;Qg(d)},this.f)}v(Yo,Lo);r(\"H.service.extension.platformData.TileProvider\",Yo);Yo.prototype.P=function(a,b,c){a=new Ho(a,b,c);a.i=Zo;return a};var Zo=new yf({strokeColor:\"transparent\",fillColor:\"transparent\",lineWidth:0,lineJoin:\"round\",lineCap:\"round\"});\nYo.prototype.c=function(a,b,c,d,e){var f=this,g=this.getTileKey(a,b,c),h,g=this.g.get(g),k={cancel:rc},l=!0,m,n=vo;g&&(this.b===n.POLYLINE||this.b===n.POLYGON?g.vc()||(d(um.pop(this.tileSize),null),l=!1):(d(x),l=!1));l&&(m=nm.setTimeout(function(){h=new Mh(\"pde\",{message:[f.uid,1,[a,b,c]]});h.then(d,e)},500),k.cancel=function(){h?h.cancel():nm.clearTimeout(m)});return k};Yo.prototype.requestInternal=Yo.prototype.c;Yo.prototype.F=function(){Yo.v.F.call(this);new Mh(\"pde\",{message:[this.uid,3]})};\nYo.ResultType=vo;function Ro(a){a=gm(hm.pde,a||{});Ro.v.constructor.call(this,a)}v(Ro,em);r(\"H.service.extension.platformData.Service\",Ro);\nRo.prototype.b=function(a,b,c,d,e){var f=\"text/plain\";if(!a)throw new C(this.b,0,a);if(!b)throw new C(this.b,1,b);if(!d)throw new C(this.b,3,d);if(!e)throw new C(this.b,4,e);a=this.aa().clone().T(a+\".\"+b).$(c);b===Bo.JSON&&(f=\"application/json\");b=new Fh(f,a.toString());b.then(d,function(a){\"error\"===a.type?e(a.statusText||\"Unable to load data\"):a.json().then(function(a){e(a.error_description||a.message)},function(){e(a.statusText)})});return b};Ro.prototype.request=Ro.prototype.b;\nhm.pde={subDomain:\"pde\",path:\"1\"};var To=\"tiles\";Ro.EntryPoint={DOC_ATTRIBUTES:\"doc/attributes\",DOC_LAYER:\"doc/layer\",DOC_LAYERS:\"doc/layers\",DOC_MAPS:\"doc/maps\",DOC_INDEXES:\"doc/indexes\",SEARCH_BBOX:\"search/bbox\",SEARCH_CORRIDOR:\"search/corridor\",SEARCH_PROXIMITY:\"search/proximity\",SEARCH_QUADKEY:\"search/quadkey\",SERVICE_CONFIGURATION:\"serviceconfiguration\",STATIC:\"static\",TILE:\"tile\",TILES:To,FILE:\"file\",INDEX:\"index\"};var Uo=\"json\",Bo={TXT:\"txt\",JSON:Uo,HTML:\"html\",BIN:\"bin\"};\nRo.EntryPointType=Bo;Ro.prototype.g=function(a,b){var c=b&&b.resultType,d=new Yo(this,a,b),e,f=vo;c==f.MARKER||c===f.DOM_MARKER?e=new th(d):e=new nh(d);return e};Ro.prototype.createTileLayer=Ro.prototype.g;T.prototype.nb=function(a){var b;b=gm(hm.pde,a||{});var c;c=\"\"+(b.path||\"\");c+=b.subDomain||\"\";c+=b.baseUrl?b.baseUrl.toString():\"\";b=mm(c);c=this.a[\"pde\"+b];c||(c=this.Y(new Ro(a)),this.a[\"pde\"+b]=c);return c};T.prototype.getPlatformDataService=T.prototype.nb;r(\"H.service.buildInfo\",function(){return Ah(\"mapsjs-service\",\"0.15.0\",\"01bfdbf\")});\n");